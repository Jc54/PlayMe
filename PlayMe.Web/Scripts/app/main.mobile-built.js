!function(){var t,e,n;!function(r){function i(t,e){return k.call(t,e)}function a(t,e){var n,r,i,a,o,s,l,c,u,d,p=e&&e.split("/"),f=y.map,v=f&&f["*"]||{};if(t&&"."===t.charAt(0))if(e){for(p=p.slice(0,p.length-1),t=p.concat(t.split("/")),c=0;c<t.length;c+=1)if(d=t[c],"."===d)t.splice(c,1),c-=1;else if(".."===d){if(1===c&&(".."===t[2]||".."===t[0]))break;c>0&&(t.splice(c-1,2),c-=2)}t=t.join("/")}else 0===t.indexOf("./")&&(t=t.substring(2));if((p||v)&&f){for(n=t.split("/"),c=n.length;c>0;c-=1){if(r=n.slice(0,c).join("/"),p)for(u=p.length;u>0;u-=1)if(i=f[p.slice(0,u).join("/")],i&&(i=i[r])){a=i,o=c;break}if(a)break;!s&&v&&v[r]&&(s=v[r],l=c)}!a&&s&&(a=s,o=l),a&&(n.splice(0,o,a),t=n.join("/"))}return t}function o(t,e){return function(){return v.apply(r,x.call(arguments,0).concat([t,e]))}}function s(t){return function(e){return a(e,t)}}function l(t){return function(e){b[t]=e}}function c(t){if(i(h,t)){var e=h[t];delete h[t],w[t]=!0,f.apply(r,e)}if(!i(b,t)&&!i(w,t))throw new Error("No "+t);return b[t]}function u(t){var e,n=t?t.indexOf("!"):-1;return n>-1&&(e=t.substring(0,n),t=t.substring(n+1,t.length)),[e,t]}function d(e,n,r){t.onResourceLoad&&e&&t.onResourceLoad({defined:n},{id:e},r)}function p(t){return function(){return y&&y.config&&y.config[t]||{}}}var f,v,g,m,b={},h={},y={},w={},k=Object.prototype.hasOwnProperty,x=[].slice;g=function(t,e){var n,r=u(t),i=r[0];return t=r[1],i&&(i=a(i,e),n=c(i)),i?t=n&&n.normalize?n.normalize(t,s(e)):a(t,e):(t=a(t,e),r=u(t),i=r[0],t=r[1],i&&(n=c(i))),{f:i?i+"!"+t:t,n:t,pr:i,p:n}},m={require:function(t){return o(t)},exports:function(t){var e=b[t];return"undefined"!=typeof e?e:b[t]={}},module:function(t){return{id:t,uri:"",exports:b[t],config:p(t)}}},f=function(t,e,n,a){var s,u,p,f,v,y,k=[];if(a=a||t,"function"==typeof n){for(e=!e.length&&n.length?["require","exports","module"]:e,v=0;v<e.length;v+=1)if(f=g(e[v],a),u=f.f,"require"===u)k[v]=m.require(t);else if("exports"===u)k[v]=m.exports(t),y=!0;else if("module"===u)s=k[v]=m.module(t);else if(i(b,u)||i(h,u)||i(w,u))k[v]=c(u);else{if(!f.p)throw new Error(t+" missing "+u);f.p.load(f.n,o(a,!0),l(u),{}),k[v]=b[u]}p=n.apply(b[t],k),t&&(s&&s.exports!==r&&s.exports!==b[t]?b[t]=s.exports:p===r&&y||(b[t]=p))}else t&&(b[t]=n);d(t,b,k)},t=e=v=function(t,e,n,i,a){return"string"==typeof t?m[t]?m[t](e):c(g(t,e).f):(t.splice||(y=t,e.splice?(t=e,e=n,n=null):t=r),e=e||function(){},"function"==typeof n&&(n=i,i=a),i?f(r,t,e,n):setTimeout(function(){f(r,t,e,n)},4),v)},v.config=function(t){return y=t,y.deps&&v(y.deps,y.callback),v},t._defined=b,n=function(t,e,n){e.splice||(n=e,e=[]),i(b,t)||i(h,t)||(h[t]=[t,e,n])},n.amd={jQuery:!0}}(),n("durandal/system",["require","jquery"],function(e,n){function r(t){var e="[object "+t+"]";i["is"+t]=function(t){return l.call(t)==e}}var i,a=!1,o=Object.keys,s=Object.prototype.hasOwnProperty,l=Object.prototype.toString,c=!1,u=Array.isArray,d=Array.prototype.slice;if(String.prototype.trim||(String.prototype.trim=function(){return this.replace(/^\s+|\s+$/g,"")}),Function.prototype.bind&&("object"==typeof console||"function"==typeof console)&&"object"==typeof console.log)try{["log","info","warn","error","assert","dir","clear","profile","profileEnd"].forEach(function(t){console[t]=this.call(console[t],console)},Function.prototype.bind)}catch(p){c=!0}e.on&&e.on("moduleLoaded",function(t,e){i.setModuleId(t,e)}),"undefined"!=typeof t&&(t.onResourceLoad=function(t,e,n){i.setModuleId(t.defined[e.id],e.id)});var f=function(){},v=function(){try{if("undefined"!=typeof console&&"function"==typeof console.log)if(window.opera)for(var t=0;t<arguments.length;)console.log("Item "+(t+1)+": "+arguments[t]),t++;else 1==d.call(arguments).length&&"string"==typeof d.call(arguments)[0]?console.log(d.call(arguments).toString()):console.log.apply(console,d.call(arguments));else Function.prototype.bind&&!c||"undefined"==typeof console||"object"!=typeof console.log||Function.prototype.call.call(console.log,console,d.call(arguments))}catch(e){}},g=function(t,e){var n;n=t instanceof Error?t:new Error(t),n.innerError=e;try{"undefined"!=typeof console&&"function"==typeof console.error?console.error(n):Function.prototype.bind&&!c||"undefined"==typeof console||"object"!=typeof console.error||Function.prototype.call.call(console.error,console,n)}catch(r){}throw n};i={version:"2.1.0",noop:f,getModuleId:function(t){return t?"function"==typeof t&&t.prototype?t.prototype.__moduleId__:"string"==typeof t?null:t.__moduleId__:null},setModuleId:function(t,e){return t?"function"==typeof t&&t.prototype?void(t.prototype.__moduleId__=e):void("string"!=typeof t&&(t.__moduleId__=e)):void 0},resolveObject:function(t){return i.isFunction(t)?new t:t},debug:function(t){return 1==arguments.length&&(a=t,a?(this.log=v,this.error=g,this.log("Debug:Enabled")):(this.log("Debug:Disabled"),this.log=f,this.error=f)),a},log:f,error:f,assert:function(t,e){t||i.error(new Error(e||"Assert:Failed"))},defer:function(t){return n.Deferred(t)},guid:function(){var t=(new Date).getTime();return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){var n=(t+16*Math.random())%16|0;return t=Math.floor(t/16),("x"==e?n:7&n|8).toString(16)})},acquire:function(){var t,n=arguments[0],r=!1;return i.isArray(n)?(t=n,r=!0):t=d.call(arguments,0),this.defer(function(n){e(t,function(){var t=arguments;setTimeout(function(){t.length>1||r?n.resolve(d.call(t,0)):n.resolve(t[0])},1)},function(t){n.reject(t)})}).promise()},extend:function(t){for(var e=d.call(arguments,1),n=0;n<e.length;n++){var r=e[n];if(r)for(var i in r)t[i]=r[i]}return t},wait:function(t){return i.defer(function(e){setTimeout(e.resolve,t)}).promise()}},i.keys=o||function(t){if(t!==Object(t))throw new TypeError("Invalid object");var e=[];for(var n in t)s.call(t,n)&&(e[e.length]=n);return e},i.isElement=function(t){return!(!t||1!==t.nodeType)},i.isArray=u||function(t){return"[object Array]"==l.call(t)},i.isObject=function(t){return t===Object(t)},i.isBoolean=function(t){return"boolean"==typeof t},i.isPromise=function(t){return t&&i.isFunction(t.then)};for(var m=["Arguments","Function","String","Number","Date","RegExp"],b=0;b<m.length;b++)r(m[b]);return i}),n("durandal/viewEngine",["durandal/system","jquery"],function(t,e){var n;return n=e.parseHTML?function(t){return e.parseHTML(t)}:function(t){return e(t).get()},{cache:{},viewExtension:".html",viewPlugin:"text",viewPluginParameters:"",isViewUrl:function(t){return-1!==t.indexOf(this.viewExtension,t.length-this.viewExtension.length)},convertViewUrlToViewId:function(t){return t.substring(0,t.length-this.viewExtension.length)},convertViewIdToRequirePath:function(t){var e=this.viewPlugin?this.viewPlugin+"!":"";return e+t+this.viewExtension+this.viewPluginParameters},parseMarkup:n,processMarkup:function(t){var e=this.parseMarkup(t);return this.ensureSingleElement(e)},ensureSingleElement:function(t){if(1==t.length)return t[0];for(var n=[],r=0;r<t.length;r++){var i=t[r];if(8!=i.nodeType){if(3==i.nodeType){var a=/\S/.test(i.nodeValue);if(!a)continue}n.push(i)}}return n.length>1?e(n).wrapAll('<div class="durandal-wrapper"></div>').parent().get(0):n[0]},tryGetViewFromCache:function(t){return this.cache[t]},putViewInCache:function(t,e){this.cache[t]=e},createView:function(e){var n=this,r=this.convertViewIdToRequirePath(e),i=this.tryGetViewFromCache(r);return i?t.defer(function(t){t.resolve(i.cloneNode(!0))}).promise():t.defer(function(i){t.acquire(r).then(function(t){var a=n.processMarkup(t);a.setAttribute("data-view",e),n.putViewInCache(r,a),i.resolve(a.cloneNode(!0))}).fail(function(t){n.createFallbackView(e,r,t).then(function(t){t.setAttribute("data-view",e),n.cache[r]=t,i.resolve(t.cloneNode(!0))})})}).promise()},createFallbackView:function(e,n,r){var i=this,a='View Not Found. Searched for "'+e+'" via path "'+n+'".';return t.defer(function(t){t.resolve(i.processMarkup('<div class="durandal-view-404">'+a+"</div>"))}).promise()}}}),n("durandal/viewLocator",["durandal/system","durandal/viewEngine"],function(t,e){function n(t,e){for(var n=0;n<t.length;n++){var r=t[n],i=r.getAttribute("data-view");if(i==e)return r}}function r(t){return(t+"").replace(/([\\\.\+\*\?\[\^\]\$\(\)\{\}\=\!\<\>\|\:])/g,"\\$1")}return{useConvention:function(t,e,n){t=t||"viewmodels",e=e||"views",n=n||e;var i=new RegExp(r(t),"gi");this.convertModuleIdToViewId=function(t){return t.replace(i,e)},this.translateViewIdToArea=function(t,e){return e&&"partial"!=e?n+"/"+e+"/"+t:n+"/"+t}},locateViewForObject:function(e,n,r){var i;if(e.getView&&(i=e.getView()))return this.locateView(i,n,r);if(e.viewUrl)return this.locateView(e.viewUrl,n,r);var a=t.getModuleId(e);return a?this.locateView(this.convertModuleIdToViewId(a),n,r):this.locateView(this.determineFallbackViewId(e),n,r)},convertModuleIdToViewId:function(t){return t},determineFallbackViewId:function(t){var e=/function (.{1,})\(/,n=e.exec(t.constructor.toString()),r=n&&n.length>1?n[1]:"";return r=r.trim(),"views/"+r},translateViewIdToArea:function(t,e){return t},locateView:function(r,i,a){if("string"==typeof r){var o;if(o=e.isViewUrl(r)?e.convertViewUrlToViewId(r):r,i&&(o=this.translateViewIdToArea(o,i)),a){var s=n(a,o);if(s)return t.defer(function(t){t.resolve(s)}).promise()}return e.createView(o)}return t.defer(function(t){t.resolve(r)}).promise()}}}),n("durandal/binder",["durandal/system","knockout"],function(t,e){function n(e){return void 0===e?{applyBindings:!0}:t.isBoolean(e)?{applyBindings:e}:(void 0===e.applyBindings&&(e.applyBindings=!0),e)}function r(r,c,u,d){if(!c||!u)return void(i.throwOnErrors?t.error(a):t.log(a,c,d));if(!c.getAttribute)return void(i.throwOnErrors?t.error(o):t.log(o,c,d));var p=c.getAttribute("data-view");try{var f;return r&&r.binding&&(f=r.binding(c)),f=n(f),i.binding(d,c,f),f.applyBindings?(t.log("Binding",p,d),e.applyBindings(u,c)):r&&e.utils.domData.set(c,l,{$data:r}),i.bindingComplete(d,c,f),r&&r.bindingComplete&&r.bindingComplete(c),e.utils.domData.set(c,s,f),f}catch(v){v.message=v.message+";\nView: "+p+";\nModuleId: "+t.getModuleId(d),i.throwOnErrors?t.error(v):t.log(v.message)}}var i,a="Insufficient Information to Bind",o="Unexpected View Type",s="durandal-binding-instruction",l="__ko_bindingContext__";return i={binding:t.noop,bindingComplete:t.noop,throwOnErrors:!1,getBindingInstruction:function(t){return e.utils.domData.get(t,s)},bindContext:function(t,e,n,i){return n&&t&&(t=t.createChildContext(n,"string"==typeof i?i:null)),r(n,e,t,n||(t?t.$data:null))},bind:function(t,e){return r(t,e,t,t)}}}),n("durandal/activator",["durandal/system","knockout"],function(t,e){function n(e){return void 0==e&&(e={}),t.isBoolean(e.closeOnDeactivate)||(e.closeOnDeactivate=c.defaults.closeOnDeactivate),e.beforeActivate||(e.beforeActivate=c.defaults.beforeActivate),e.afterDeactivate||(e.afterDeactivate=c.defaults.afterDeactivate),e.affirmations||(e.affirmations=c.defaults.affirmations),e.interpretResponse||(e.interpretResponse=c.defaults.interpretResponse),e.areSameItem||(e.areSameItem=c.defaults.areSameItem),e.findChildActivator||(e.findChildActivator=c.defaults.findChildActivator),e}function r(e,n,r){return t.isArray(r)?e[n].apply(e,r):e[n](r)}function i(e,n,r,i,a){if(e&&e.deactivate){t.log("Deactivating",e);var o;try{o=e.deactivate(n)}catch(s){return t.log("ERROR: "+s.message,s),void i.resolve(!1)}o&&o.then?o.then(function(){r.afterDeactivate(e,n,a),i.resolve(!0)},function(e){t.log(e),i.resolve(!1)}):(r.afterDeactivate(e,n,a),i.resolve(!0))}else e&&r.afterDeactivate(e,n,a),i.resolve(!0)}function a(e,n,i,a){var o;if(e&&e.activate){t.log("Activating",e);try{o=r(e,"activate",a)}catch(s){return t.log("ERROR: "+s.message,s),void i(!1)}}o&&o.then?o.then(function(){n(e),i(!0)},function(e){t.log("ERROR: "+e.message,e),i(!1)}):(n(e),i(!0))}function o(e,n,r,i){return i=t.extend({},u,i),r.lifecycleData=null,t.defer(function(a){function o(){if(e&&e.canDeactivate&&i.canDeactivate){var o;try{o=e.canDeactivate(n)}catch(s){return t.log("ERROR: "+s.message,s),void a.resolve(!1)}o.then?o.then(function(t){r.lifecycleData=t,a.resolve(r.interpretResponse(t))},function(e){t.log("ERROR: "+e.message,e),a.resolve(!1)}):(r.lifecycleData=o,a.resolve(r.interpretResponse(o)))}else a.resolve(!0)}var s=r.findChildActivator(e);s?s.canDeactivate().then(function(t){t?o():a.resolve(!1)}):o()}).promise()}function s(e,n,i,a,o){return i.lifecycleData=null,t.defer(function(s){if(i.areSameItem(n(),e,a,o))return void s.resolve(!0);if(e&&e.canActivate){var l;try{l=r(e,"canActivate",o)}catch(c){return t.log("ERROR: "+c.message,c),void s.resolve(!1)}l.then?l.then(function(t){i.lifecycleData=t,s.resolve(i.interpretResponse(t))},function(e){t.log("ERROR: "+e.message,e),s.resolve(!1)}):(i.lifecycleData=l,s.resolve(i.interpretResponse(l)))}else s.resolve(!0)}).promise()}function l(r,l){var c,u=e.observable(null);l=n(l);var d=e.computed({read:function(){return u()},write:function(t){d.viaSetter=!0,d.activateItem(t)}});return d.__activator__=!0,d.settings=l,l.activator=d,d.isActivating=e.observable(!1),d.forceActiveItem=function(t){u(t)},d.canDeactivateItem=function(t,e,n){return o(t,e,l,n)},d.deactivateItem=function(e,n){return t.defer(function(t){d.canDeactivateItem(e,n).then(function(r){r?i(e,n,l,t,u):(d.notifySubscribers(),t.resolve(!1))})}).promise()},d.canActivateItem=function(t,e){return s(t,u,l,c,e)},d.activateItem=function(e,n,r){var o=d.viaSetter;return d.viaSetter=!1,t.defer(function(s){if(d.isActivating())return void s.resolve(!1);d.isActivating(!0);var p=u();return l.areSameItem(p,e,c,n)?(d.isActivating(!1),void s.resolve(!0)):void d.canDeactivateItem(p,l.closeOnDeactivate,r).then(function(r){r?d.canActivateItem(e,n).then(function(r){r?t.defer(function(t){i(p,l.closeOnDeactivate,l,t)}).promise().then(function(){e=l.beforeActivate(e,n),a(e,u,function(t){c=n,d.isActivating(!1),s.resolve(t)},n)}):(o&&d.notifySubscribers(),d.isActivating(!1),s.resolve(!1))}):(o&&d.notifySubscribers(),d.isActivating(!1),s.resolve(!1))})}).promise()},d.canActivate=function(){var t;return r?(t=r,r=!1):t=d(),d.canActivateItem(t)},d.activate=function(){var t;return r?(t=r,r=!1):t=d(),d.activateItem(t)},d.canDeactivate=function(t){return d.canDeactivateItem(d(),t)},d.deactivate=function(t){return d.deactivateItem(d(),t)},d.includeIn=function(t){t.canActivate=function(){return d.canActivate()},t.activate=function(){return d.activate()},t.canDeactivate=function(t){return d.canDeactivate(t)},t.deactivate=function(t){return d.deactivate(t)}},l.includeIn?d.includeIn(l.includeIn):r&&d.activate(),d.forItems=function(e){l.closeOnDeactivate=!1,l.determineNextItemToActivate=function(t,e){var n=e-1;return-1==n&&t.length>1?t[1]:n>-1&&n<t.length-1?t[n]:null},l.beforeActivate=function(t){var n=d();if(t){var r=e.indexOf(t);-1==r?e.push(t):t=e()[r]}else t=l.determineNextItemToActivate(e,n?e.indexOf(n):0);return t},l.afterDeactivate=function(t,n){n&&e.remove(t)};var n=d.canDeactivate;d.canDeactivate=function(r){return r?t.defer(function(t){function n(){for(var e=0;e<a.length;e++)if(!a[e])return void t.resolve(!1);t.resolve(!0)}for(var i=e(),a=[],o=0;o<i.length;o++)d.canDeactivateItem(i[o],r).then(function(t){a.push(t),a.length==i.length&&n()})}).promise():n()};var r=d.deactivate;return d.deactivate=function(n){return n?t.defer(function(t){function r(r){setTimeout(function(){d.deactivateItem(r,n).then(function(){a++,e.remove(r),a==o&&t.resolve()})},1)}for(var i=e(),a=0,o=i.length,s=0;o>s;s++)r(i[s])}).promise():r()},d},d}var c,u={canDeactivate:!0},d={closeOnDeactivate:!0,affirmations:["yes","ok","true"],interpretResponse:function(n){return t.isObject(n)&&(n=n.can||!1),t.isString(n)?-1!==e.utils.arrayIndexOf(this.affirmations,n.toLowerCase()):n},areSameItem:function(t,e,n,r){return t==e},beforeActivate:function(t){return t},afterDeactivate:function(t,e,n){e&&n&&n(null)},findChildActivator:function(t){return null}};return c={defaults:d,create:l,isActivator:function(t){return t&&t.__activator__}}}),n("durandal/composition",["durandal/system","durandal/viewLocator","durandal/binder","durandal/viewEngine","durandal/activator","jquery","knockout"],function(t,e,n,r,i,a,o){function s(e,n,r){try{if(e.onError)try{e.onError(n,r)}catch(i){t.error(i)}else t.error(n)}finally{c(e,r,!0)}}function l(t){for(var e=[],n={childElements:e,activeView:null},r=o.virtualElements.firstChild(t);r;)1==r.nodeType&&(e.push(r),r.getAttribute(x)&&(n.activeView=r)),r=o.virtualElements.nextSibling(r);return n.activeView||(n.activeView=e[0]),n}function c(t,e,n){if(T--,0===T){var r=A;A=[],n||setTimeout(function(){for(var n=r.length;n--;)try{r[n]()}catch(i){s(t,i,e)}},1)}u(t)}function u(t){delete t.activeView,delete t.viewElements}function d(e,n,r,i){if(r)n();else if(e.activate&&e.model&&e.model.activate){var a;try{a=t.isArray(e.activationData)?e.model.activate.apply(e.model,e.activationData):e.model.activate(e.activationData),a&&a.then?a.then(n,function(t){s(e,t,i),n()}):a||void 0===a?n():c(e,i)}catch(o){s(e,o,i)}}else n()}function p(e,n){var e=this;if(e.activeView&&e.activeView.removeAttribute(x),e.child)try{e.model&&e.model.attached&&(e.composingNewView||e.alwaysTriggerAttach)&&e.model.attached(e.child,e.parent,e),e.attached&&e.attached(e.child,e.parent,e),e.child.setAttribute(x,!0),e.composingNewView&&e.model&&e.model.detached&&o.utils.domNodeDisposal.addDisposeCallback(e.child,function(){try{e.model.detached(e.child,e.parent,e)}catch(t){s(e,t,n)}})}catch(r){s(e,r,n)}e.triggerAttach=t.noop}function f(e){if(t.isString(e.transition)){if(e.activeView){if(e.activeView==e.child)return!1;if(!e.child)return!0;if(e.skipTransitionOnSameViewId){var n=e.activeView.getAttribute("data-view"),r=e.child.getAttribute("data-view");return n!=r}}return!0}return!1}function v(t){for(var e=0,n=t.length,r=[];n>e;e++){var i=t[e].cloneNode(!0);r.push(i)}return r}function g(e){var n=v(e.parts),r=w.getParts(n),i=w.getParts(e.child);for(var o in r){var s=i[o];s||(s=a('[data-part="'+o+'"]',e.child).get(0))?s.parentNode.replaceChild(r[o],s):t.log("Could not find part to override: "+o)}}function m(e){var n,r,i=o.virtualElements.childNodes(e.parent);if(!t.isArray(i)){var a=[];for(n=0,r=i.length;r>n;n++)a[n]=i[n];i=a}for(n=1,r=i.length;r>n;n++)o.removeNode(i[n])}function b(t){o.utils.domData.set(t,R,t.style.display),t.style.display="none"}function h(t){var e=o.utils.domData.get(t,R);t.style.display="none"===e?"block":e}function y(t){var e=t.getAttribute("data-bind");if(!e)return!1;for(var n=0,r=N.length;r>n;n++)if(e.indexOf(N[n])>-1)return!0;return!1}var w,k={},x="data-active-view",A=[],T=0,S="durandal-composition-data",I="data-part",P=["model","view","transition","area","strategy","activationData","onError"],R="durandal-visibility-data",N=["compose:"],M={complete:function(t){A.push(t)}};return w={composeBindings:N,convertTransitionToModuleId:function(t){return"transitions/"+t},defaultTransitionName:null,current:M,addBindingHandler:function(t,e,n){var r,i,a="composition-handler-"+t;e=e||o.bindingHandlers[t],n=n||function(){return void 0},i=o.bindingHandlers[t]={init:function(t,r,i,s,l){if(T>0){var c={trigger:o.observable(null)};w.current.complete(function(){e.init&&e.init(t,r,i,s,l),e.update&&(o.utils.domData.set(t,a,e),c.trigger("trigger"))}),o.utils.domData.set(t,a,c)}else o.utils.domData.set(t,a,e),e.init&&e.init(t,r,i,s,l);return n(t,r,i,s,l)},update:function(t,e,n,r,i){var s=o.utils.domData.get(t,a);return s.update?s.update(t,e,n,r,i):void(s.trigger&&s.trigger())}};for(r in e)"init"!==r&&"update"!==r&&(i[r]=e[r])},getParts:function(t,e){if(e=e||{},!t)return e;void 0===t.length&&(t=[t]);for(var n=0,r=t.length;r>n;n++){var i,a=t[n];a.getAttribute&&(i=a.getAttribute(I),i&&(e[i]=a),a.hasChildNodes()&&!y(a)&&w.getParts(a.childNodes,e))}return e},cloneNodes:v,finalize:function(e,r){if(void 0===e.transition&&(e.transition=this.defaultTransitionName),e.child||e.activeView)if(f(e)){var i=this.convertTransitionToModuleId(e.transition);t.acquire(i).then(function(t){e.transition=t,t(e).then(function(){if(e.cacheViews){if(e.activeView){var t=n.getBindingInstruction(e.activeView);t&&void 0!=t.cacheViews&&!t.cacheViews?o.removeNode(e.activeView):b(e.activeView)}}else e.child?m(e):o.virtualElements.emptyNode(e.parent);e.child&&h(e.child),e.triggerAttach(e,r),c(e,r)})}).fail(function(t){s(e,"Failed to load transition ("+i+"). Details: "+t.message,r)})}else{if(e.child!=e.activeView){if(e.cacheViews&&e.activeView){var a=n.getBindingInstruction(e.activeView);!a||void 0!=a.cacheViews&&!a.cacheViews?o.removeNode(e.activeView):b(e.activeView)}e.child?(e.cacheViews||m(e),h(e.child)):e.cacheViews||o.virtualElements.emptyNode(e.parent)}e.triggerAttach(e,r),c(e,r)}else e.cacheViews||o.virtualElements.emptyNode(e.parent),e.triggerAttach(e,r),c(e,r)},bindAndShow:function(t,e,i,a){i.child=t,i.parent.__composition_context=i,i.cacheViews?i.composingNewView=-1==o.utils.arrayIndexOf(i.viewElements,t):i.composingNewView=!0,d(i,function(){if(i.parent.__composition_context==i){if(delete i.parent.__composition_context,i.binding&&i.binding(i.child,i.parent,i),i.preserveContext&&i.bindingContext)i.composingNewView&&(i.parts&&g(i),b(t),o.virtualElements.prepend(i.parent,t),n.bindContext(i.bindingContext,t,i.model,i.as));else if(t){var a=i.model||k,s=o.dataFor(t);if(s!=a){if(!i.composingNewView)return o.removeNode(t),void r.createView(t.getAttribute("data-view")).then(function(t){w.bindAndShow(t,e,i,!0)});i.parts&&g(i),b(t),o.virtualElements.prepend(i.parent,t),n.bind(a,t)}}w.finalize(i,e)}else c(i,e)},a,e)},defaultStrategy:function(t){return e.locateViewForObject(t.model,t.area,t.viewElements)},getSettings:function(e,n){var a,s=e(),l=o.utils.unwrapObservable(s)||{},c=i.isActivator(s);if(t.isString(l))return l=r.isViewUrl(l)?{view:l}:{model:l,activate:!c};if(a=t.getModuleId(l))return l={model:l,activate:!c};!c&&l.model&&(c=i.isActivator(l.model));for(var u in l)-1!=o.utils.arrayIndexOf(P,u)?l[u]=o.utils.unwrapObservable(l[u]):l[u]=l[u];return c?l.activate=!1:void 0===l.activate&&(l.activate=!0),l},executeStrategy:function(t,e){t.strategy(t).then(function(n){w.bindAndShow(n,e,t)})},inject:function(n,r){return n.model?n.view?void e.locateView(n.view,n.area,n.viewElements).then(function(t){w.bindAndShow(t,r,n)}):(n.strategy||(n.strategy=this.defaultStrategy),void(t.isString(n.strategy)?t.acquire(n.strategy).then(function(t){n.strategy=t,w.executeStrategy(n,r)}).fail(function(t){s(n,"Failed to load view strategy ("+n.strategy+"). Details: "+t.message,r)}):this.executeStrategy(n,r))):void this.bindAndShow(null,r,n)},compose:function(n,r,i,a){T++,a||(r=w.getSettings(function(){return r},n)),r.compositionComplete&&A.push(function(){r.compositionComplete(r.child,r.parent,r)}),A.push(function(){r.composingNewView&&r.model&&r.model.compositionComplete&&r.model.compositionComplete(r.child,r.parent,r)});var o=l(n);r.activeView=o.activeView,r.parent=n,r.triggerAttach=p,r.bindingContext=i,r.cacheViews&&!r.viewElements&&(r.viewElements=o.childElements),r.model?t.isString(r.model)?t.acquire(r.model).then(function(e){r.model=t.resolveObject(e),w.inject(r,n)}).fail(function(t){s(r,"Failed to load composed module ("+r.model+"). Details: "+t.message,n)}):w.inject(r,n):r.view?(r.area=r.area||"partial",r.preserveContext=!0,e.locateView(r.view,r.area,r.viewElements).then(function(t){w.bindAndShow(t,n,r)})):this.bindAndShow(null,n,r)}},o.bindingHandlers.compose={init:function(){return{controlsDescendantBindings:!0}},update:function(t,e,n,i,a){var s=w.getSettings(e,t);if(s.mode){var l=o.utils.domData.get(t,S);if(!l){var c=o.virtualElements.childNodes(t);l={},"inline"===s.mode?l.view=r.ensureSingleElement(c):"templated"===s.mode&&(l.parts=v(c)),o.virtualElements.emptyNode(t),o.utils.domData.set(t,S,l)}"inline"===s.mode?s.view=l.view.cloneNode(!0):"templated"===s.mode&&(s.parts=l.parts),s.preserveContext=!0}w.compose(t,s,a,!0)}},o.virtualElements.allowedBindings.compose=!0,w}),n("durandal/events",["durandal/system"],function(t){var e=/\s+/,n=function(){},r=function(t,e){this.owner=t,this.events=e};return r.prototype.then=function(t,e){return this.callback=t||this.callback,this.context=e||this.context,this.callback?(this.owner.on(this.events,this.callback,this.context),this):this},r.prototype.on=r.prototype.then,r.prototype.off=function(){return this.owner.off(this.events,this.callback,this.context),this},n.prototype.on=function(t,n,i){var a,o,s;if(n){for(a=this.callbacks||(this.callbacks={}),t=t.split(e);o=t.shift();)s=a[o]||(a[o]=[]),s.push(n,i);return this}return new r(this,t)},n.prototype.off=function(n,r,i){var a,o,s,l;if(!(o=this.callbacks))return this;if(!(n||r||i))return delete this.callbacks,this;for(n=n?n.split(e):t.keys(o);a=n.shift();)if((s=o[a])&&(r||i))for(l=s.length-2;l>=0;l-=2)r&&s[l]!==r||i&&s[l+1]!==i||s.splice(l,2);else delete o[a];return this},n.prototype.trigger=function(t){var n,r,i,a,o,s,l,c;if(!(r=this.callbacks))return this;for(c=[],t=t.split(e),a=1,o=arguments.length;o>a;a++)c[a-1]=arguments[a];for(;n=t.shift();){if((l=r.all)&&(l=l.slice()),(i=r[n])&&(i=i.slice()),i)for(a=0,o=i.length;o>a;a+=2)i[a].apply(i[a+1]||this,c);if(l)for(s=[n].concat(c),a=0,o=l.length;o>a;a+=2)l[a].apply(l[a+1]||this,s)}return this},n.prototype.proxy=function(t){var e=this;return function(n){e.trigger(t,n)}},n.includeIn=function(t){t.on=n.prototype.on,t.off=n.prototype.off,t.trigger=n.prototype.trigger,t.proxy=n.prototype.proxy},n}),n("durandal/app",["durandal/system","durandal/viewEngine","durandal/composition","durandal/events","jquery"],function(t,e,n,r,i){function a(){return t.defer(function(e){return 0==s.length?void e.resolve():void t.acquire(s).then(function(n){for(var r=0;r<n.length;r++){var i=n[r];if(i.install){var a=l[r];t.isObject(a)||(a={}),i.install(a),t.log("Plugin:Installed "+s[r])}else t.log("Plugin:Loaded "+s[r])}e.resolve()}).fail(function(e){t.error("Failed to load plugin(s). Details: "+e.message)})}).promise()}var o,s=[],l=[];return o={title:"Application",configurePlugins:function(e,n){var r=t.keys(e);n=n||"plugins/",-1===n.indexOf("/",n.length-1)&&(n+="/");for(var i=0;i<r.length;i++){var a=r[i];s.push(n+a),l.push(e[a])}},start:function(){return t.log("Application:Starting"),this.title&&(document.title=this.title),t.defer(function(e){i(function(){a().then(function(){e.resolve(),t.log("Application:Started")})})}).promise()},setRoot:function(r,i,a){function o(){if(l.model)if(l.model.canActivate)try{var e=l.model.canActivate();e&&e.then?e.then(function(t){t&&n.compose(s,l)}).fail(function(e){t.error(e)}):e&&n.compose(s,l)}catch(r){t.error(r)}else n.compose(s,l);else n.compose(s,l)}var s,l={activate:!0,transition:i};s=!a||t.isString(a)?document.getElementById(a||"applicationHost"):a,t.isString(r)&&e.isViewUrl(r)?l.view=r:l.model=r,t.isString(l.model)?t.acquire(l.model).then(function(e){l.model=t.resolveObject(e),o()}).fail(function(e){t.error("Failed to load root module ("+l.model+"). Details: "+e.message)}):o()}},r.includeIn(o),o}),n("services/messenger",[],function(){var t={error:"error",warn:"warn",info:"info"};return{types:t,show:function(t,e){$.notify(t,{className:e,globalPosition:"bottom right"})}}}),n("services/error",["services/messenger"],function(t){var e={connection:"An error occurred while requesting data from the server"};return{errors:e,show:function(e){t.show(e,t.types.error)}}}),n("repositories/userRepository",["services/error"],function(t){return{isAdmin:function(t){return $.getJSON("api/admin/isUserAdmin",function(e){t(e)})},isSuperAdmin:function(t){return $.getJSON("api/admin/isUserSuperAdmin",function(e){t(e)})},getAdminUsers:function(e){return $.getJSON("api/admin/GetAdminUsers",function(t){e(t)}).error(function(){t.show(t.errors.read)})},saveAdminUser:function(e){return $.ajax("api/admin/AddAdminUser",{data:ko.toJSON(e),type:"post",contentType:"application/json"}).error(function(){t.show(t.errors.save)})},removeAdminUser:function(e){return $.ajax("api/admin/RemoveAdminUser/",{data:ko.toJSON(e),type:"post",contentType:"application/json"}).error(function(){t.show(t.errors.save)})}}}),t.config({paths:{text:"../text",durandal:"../durandal",plugins:"../durandal/plugins",transitions:"../durandal/transitions"}}),n("jquery",[],function(){return jQuery}),n("knockout",ko),n("main.mobile",["durandal/system","durandal/app","durandal/viewLocator","repositories/userRepository"],function(t,e,n,r){e.title="Play Me",e.configurePlugins({router:!0,dialog:!0,widget:!0}),e.isAdmin=ko.observable(),r.isAdmin(e.isAdmin),e.start().then(function(){n.useConvention("viewmodels","views.mobile"),e.setRoot("viewmodels/shell")})}),t.config({paths:{text:"../text",durandal:"../durandal",plugins:"../durandal/plugins",transitions:"../durandal/transitions"}}),n("jquery",[],function(){return jQuery}),n("knockout",ko),n("main",["durandal/system","durandal/app","durandal/viewLocator","repositories/userRepository"],function(t,e,n,r){e.title="Play Me",e.configurePlugins({router:!0,dialog:!0,widget:!0}),e.isAdmin=ko.observable(!1),r.isAdmin(e.isAdmin),e.isSuperAdmin=ko.observable(!1),r.isSuperAdmin(e.isSuperAdmin),e.start().then(function(){n.useConvention(),e.setRoot("viewmodels/shell","entrance")})}),n("repositories/albumRepository",["services/error"],function(t){var e=function(e,n,r){return $.getJSON("api/browse/album/"+n+"/"+r,function(t){var n=ko.mapping.fromJS(t);ko.utils.arrayForEach(n.Tracks(),function(t){var e={ReasonExpanded:ko.observable(!1)};$.extend(t,e)}),e(n)}).error(function(){t.show(t.errors.read)})};return{getAlbum:e}}),n("repositories/artistRepository",["services/error"],function(t){var e=function(e,n,r){return $.getJSON("api/browse/artist/"+n+"/"+r,function(t){e(ko.mapping.fromJS(t))}).error(function(){t.show(t.errors.read)})};return{getArtist:e}}),n("repositories/historyRepository",["services/error"],function(t){var e=function(e,n,r){return $.getJSON("api/history",{filter:r,start:e().length,take:50},function(t){n(t.HasMorePages);var r=ko.mapping.fromJS(t).PageData();ko.utils.arrayForEach(r,function(t){var e={ReasonExpanded:ko.observable(!1)};$.extend(t.Track,e)}),ko.utils.arrayPushAll(e,r)}).error(function(){t.show(t.errors.read)})};return{getHistory:e}}),n("repositories/likesRepository",["services/error"],function(t){var e=function(e,n){return $.getJSON("api/likes/mylikes",{start:e().length,take:50},function(t){n(t.HasMorePages);var r=ko.mapping.fromJS(t).PageData();ko.utils.arrayForEach(r,function(t){var e={ReasonExpanded:ko.observable(!1)};$.extend(t,e)}),ko.utils.arrayPushAll(e,r)}).error(function(){t.show(t.errors.read)})};return{getLikes:e}}),n("repositories/logRepository",["services/error"],function(t){var e=function(e,n,r){var i={direction:r(),start:e().length,take:50};return $.getJSON("api/admin/getLogEntries",i,function(t){n(t.HasMorePages),ko.utils.arrayPushAll(e,ko.mapping.fromJS(t).PageData())}).error(function(){t.show(t.errors.read)})};return{getLogEntries:e}}),n("repositories/queueRepository",["services/error"],function(t){var e=function(e){return $.getJSON("api/queue",function(t){e(ko.mapping.fromJS(t)())}).error(function(){t.show(t.errors.read)})},n=function(e){if(0==e.IsAlreadyQueued()){var n=new Object;return n.id=encodeURIComponent(e.Link()),n.provider=e.MusicProvider.Identifier(),n.reason=e.Reason(),$.post("api/Queue/Enqueue",n,function(n){""!=n?(e.IsAlreadyQueued(!1),t.show(n)):e.IsAlreadyQueued(!0)}).error(function(){t.show(t.errors.read)})}};return{getQueue:e,queueTrack:n}}),n("repositories/searchRepository",["services/error"],function(t){var e=function(e,n,r){var i={provider:n,searchTerm:r};return $.getJSON("api/search",i,function(t){var n=ko.mapping.fromJS(t);ko.utils.arrayForEach(n.PagedTracks.Tracks(),function(t){var e={ReasonExpanded:ko.observable(!1)};$.extend(t,e)}),e(n)}).error(function(){t.show(t.errors.read)})},n=function(e){return $.getJSON("api/search/activeMusicProviders",function(t){e(ko.mapping.fromJS(t)())}).error(function(){t.show(t.errors.connection)})};return{doSearch:e,getActiveProviders:n}}),n("viewmodels/admin-log",["repositories/logRepository"],function(t){var e=ko.observableArray([]),n=ko.observable("Descending"),r=ko.observable(!1),i=function(){n("Ascending"==n()?"Descending":"Ascending"),
a(!0)},a=function(i){return i&&e([]),t.getLogEntries(e,r,n)};return{logEntries:e,sortDirection:n,toggleDirection:i,getMoreLogEntries:function(){return a(!1)},showMore:ko.computed(function(){return e().length>0&&r()}),activate:function(){return a(!0)}}}),n("viewmodels/admin-users",["repositories/userRepository"],function(t){var e=function(t){this.Username=t},n=ko.observable(new e("")),r=ko.observableArray([]);return{newAdminUser:n,adminUsers:r,addAdminUser:function(i){return""==i.Username?!1:t.saveAdminUser(i).then(function(){r.push(i),n(new e(""))})},removeAdminUser:function(e){return t.removeAdminUser(e).then(function(){r.remove(e)})},activate:function(){return t.getAdminUsers(r)}}}),n("plugins/history",["durandal/system","jquery"],function(t,e){function n(t,e,n){if(n){var r=t.href.replace(/(javascript:|#).*$/,"");s.history.replaceState?s.history.replaceState({},document.title,r+"#"+e):t.replace(r+"#"+e)}else t.hash="#"+e}var r=/^[#\/]|\s+$/g,i=/^\/+|\/+$/g,a=/msie [\w.]+/,o=/\/$/,s={interval:50,active:!1};return"undefined"!=typeof window&&(s.location=window.location,s.history=window.history),s.getHash=function(t){var e=(t||s).location.href.match(/#(.*)$/);return e?e[1]:""},s.getFragment=function(t,e){if(null==t)if(s._hasPushState||!s._wantsHashChange||e){t=s.location.pathname+s.location.search;var n=s.root.replace(o,"");t.indexOf(n)||(t=t.substr(n.length))}else t=s.getHash();return t.replace(r,"")},s.activate=function(n){s.active&&t.error("History has already been activated."),s.active=!0,s.options=t.extend({},{root:"/"},s.options,n),s.root=s.options.root,s._wantsHashChange=s.options.hashChange!==!1,s._wantsPushState=!!s.options.pushState,s._hasPushState=!!(s.options.pushState&&s.history&&s.history.pushState);var o=s.getFragment(),l=document.documentMode,c=a.exec(navigator.userAgent.toLowerCase())&&(!l||7>=l);s.root=("/"+s.root+"/").replace(i,"/"),c&&s._wantsHashChange&&(s.iframe=e('<iframe src="javascript:0" tabindex="-1" />').hide().appendTo("body")[0].contentWindow,s.navigate(o,!1)),s._hasPushState?e(window).on("popstate",s.checkUrl):s._wantsHashChange&&"onhashchange"in window&&!c?e(window).on("hashchange",s.checkUrl):s._wantsHashChange&&(s._checkUrlInterval=setInterval(s.checkUrl,s.interval)),s.fragment=o;var u=s.location,d=u.pathname.replace(/[^\/]$/,"$&/")===s.root;if(s._wantsHashChange&&s._wantsPushState){if(!s._hasPushState&&!d)return s.fragment=s.getFragment(null,!0),s.location.replace(s.root+s.location.search+"#"+s.fragment),!0;s._hasPushState&&d&&u.hash&&(this.fragment=s.getHash().replace(r,""),this.history.replaceState({},document.title,s.root+s.fragment+u.search))}return s.options.silent?void 0:s.loadUrl(n.startRoute)},s.deactivate=function(){e(window).off("popstate",s.checkUrl).off("hashchange",s.checkUrl),clearInterval(s._checkUrlInterval),s.active=!1},s.checkUrl=function(){var t=s.getFragment();return t===s.fragment&&s.iframe&&(t=s.getFragment(s.getHash(s.iframe))),t===s.fragment?!1:(s.iframe&&s.navigate(t,!1),void s.loadUrl())},s.loadUrl=function(t){var e=s.fragment=s.getFragment(t);return s.options.routeHandler?s.options.routeHandler(e):!1},s.navigate=function(e,r){if(!s.active)return!1;if(void 0===r?r={trigger:!0}:t.isBoolean(r)&&(r={trigger:r}),e=s.getFragment(e||""),s.fragment!==e){s.fragment=e;var i=s.root+e;if(""===e&&"/"!==i&&(i=i.slice(0,-1)),s._hasPushState)s.history[r.replace?"replaceState":"pushState"]({},document.title,i);else{if(!s._wantsHashChange)return s.location.assign(i);n(s.location,e,r.replace),s.iframe&&e!==s.getFragment(s.getHash(s.iframe))&&(r.replace||s.iframe.document.open().close(),n(s.iframe.location,e,r.replace))}return r.trigger?s.loadUrl(e):void 0}},s.navigateBack=function(){s.history.back()},s}),n("plugins/router",["durandal/system","durandal/app","durandal/activator","durandal/events","durandal/composition","plugins/history","knockout","jquery"],function(t,e,n,r,i,a,o,s){function l(t){return t=t.replace(h,"\\$&").replace(g,"(?:$1)?").replace(m,function(t,e){return e?t:"([^/]+)"}).replace(b,"(.*?)"),new RegExp("^"+t+"$",w?void 0:"i")}function c(t){var e=t.indexOf(":"),n=e>0?e-1:t.length;return t.substring(0,n)}function u(t,e){return-1!==t.indexOf(e,t.length-e.length)}function d(t,e){if(!t||!e)return!1;if(t.length!=e.length)return!1;for(var n=0,r=t.length;r>n;n++)if(t[n]!=e[n])return!1;return!0}function p(t){return t.queryString?t.fragment+"?"+t.queryString:t.fragment}var f,v,g=/\((.*?)\)/g,m=/(\(\?)?:\w+/g,b=/\*\w+/g,h=/[\-{}\[\]+?.,\\\^$|#\s]/g,y=/\/$/,w=!1,k="/",x="/",A=function(){function i(t,e){return t.router&&t.router.parent==e}function s(t){D&&D.config.isActive&&D.config.isActive(t)}function g(e,n,r){t.log("Navigation Complete",e,n);var a=t.getModuleId(E);a&&_.trigger("router:navigation:from:"+a),E=e,s(!1),D=n,s(!0);var o=t.getModuleId(E);switch(o&&_.trigger("router:navigation:to:"+o),i(e,_)||_.updateDocumentTitle(e,n),r){case"rootRouter":k=p(D);break;case"rootRouterWithChild":x=p(D);break;case"lastChildRouter":k=x}v.explicitNavigation=!1,v.navigatingBack=!1,_.trigger("router:navigation:complete",e,n,_)}function b(e,n){t.log("Navigation Cancelled"),_.activeInstruction(D),_.navigate(k,!1),O(!1),v.explicitNavigation=!1,v.navigatingBack=!1,_.trigger("router:navigation:cancelled",e,n,_)}function h(e){t.log("Navigation Redirecting"),O(!1),v.explicitNavigation=!1,v.navigatingBack=!1,_.navigate(e,{trigger:!0,replace:!0})}function w(e,n,r){v.navigatingBack=!v.explicitNavigation&&E!=r.fragment,_.trigger("router:route:activating",n,r,_);var a={canDeactivate:!_.parent};e.activateItem(n,r.params,a).then(function(t){if(t){var a=E,o=i(n,_),s="";if(_.parent?o||(s="lastChildRouter"):s=o?"rootRouterWithChild":"rootRouter",g(n,r,s),o){n.router.trigger("router:route:before-child-routes",n,r,_);var l=r.fragment;r.queryString&&(l+="?"+r.queryString),n.router.loadUrl(l)}a==n&&(_.attached(),_.compositionComplete())}else e.settings.lifecycleData&&e.settings.lifecycleData.redirect?h(e.settings.lifecycleData.redirect):b(n,r);f&&(f.resolve(),f=null)}).fail(function(e){t.error(e)})}function T(e,n,r){var i=_.guardRoute(n,r);i||""===i?i.then?i.then(function(i){i?t.isString(i)?h(i):w(e,n,r):b(n,r)}):t.isString(i)?h(i):w(e,n,r):b(n,r)}function S(t,e,n){_.guardRoute?T(t,e,n):w(t,e,n)}function I(t){return D&&D.config.moduleId==t.config.moduleId&&E&&(E.canReuseForRoute&&E.canReuseForRoute.apply(E,t.params)||!E.canReuseForRoute&&E.router&&E.router.loadUrl)}function P(){if(!O()){var e=$.shift();if($=[],e)if(O(!0),_.activeInstruction(e),_.trigger("router:navigation:processing",e,_),I(e)){var r=n.create();r.forceActiveItem(E),r.settings.areSameItem=q.settings.areSameItem,r.settings.findChildActivator=q.settings.findChildActivator,S(r,E,e)}else e.config.moduleId?t.acquire(e.config.moduleId).then(function(n){var r=t.resolveObject(n);e.config.viewUrl&&(r.viewUrl=e.config.viewUrl),S(q,r,e)}).fail(function(n){t.error("Failed to load routed module ("+e.config.moduleId+"). Details: "+n.message,n)}):S(q,{viewUrl:e.config.viewUrl,canReuseForRoute:function(){return!0}},e)}}function R(t){$.unshift(t),P()}function N(t,e,n){for(var r=t.exec(e).slice(1),i=0;i<r.length;i++){var a=r[i];r[i]=a?decodeURIComponent(a):null}var o=_.parseQueryString(n);return o&&r.push(o),{params:r,queryParams:o}}function M(e){_.trigger("router:route:before-config",e,_),t.isRegExp(e.route)?e.routePattern=e.route:(e.title=e.title||_.convertRouteToTitle(e.route),e.viewUrl||(e.moduleId=e.moduleId||_.convertRouteToModuleId(e.route)),e.hash=e.hash||_.convertRouteToHash(e.route),e.hasChildRoutes&&(e.route=e.route+"*childRoutes"),e.routePattern=l(e.route)),e.isActive=e.isActive||o.observable(!1),_.trigger("router:route:after-config",e,_),_.routes.push(e),_.route(e.routePattern,function(t,n){var r=N(e.routePattern,t,n);R({fragment:t,queryString:n,config:e,params:r.params,queryParams:r.queryParams})})}function C(e){if(t.isArray(e.route))for(var n=e.isActive||o.observable(!1),r=0,i=e.route.length;i>r;r++){var a=t.extend({},e);a.route=e.route[r],a.isActive=n,r>0&&delete a.nav,M(a)}else M(e);return _}function V(t){var n=o.unwrap(e.title);n?document.title=t+" | "+n:document.title=t}var E,D,$=[],O=o.observable(!1),q=n.create(),_={handlers:[],routes:[],navigationModel:o.observableArray([]),activeItem:q,isNavigating:o.computed(function(){var t=q(),e=O(),n=t&&t.router&&t.router!=_&&t.router.isNavigating()?!0:!1;return e||n}),activeInstruction:o.observable(null),__router__:!0};r.includeIn(_),q.settings.areSameItem=function(t,e,n,r){return t==e?d(n,r):!1},q.settings.findChildActivator=function(t){return t&&t.router&&t.router.parent==_?t.router.activeItem:null},_.parseQueryString=function(e){var n,r;if(!e)return null;if(r=e.split("&"),0==r.length)return null;n={};for(var i=0;i<r.length;i++){var a=r[i];if(""!==a){var o=a.split(/=(.+)?/),s=o[0],l=o[1]&&decodeURIComponent(o[1].replace(/\+/g," ")),c=n[s];c?t.isArray(c)?c.push(l):n[s]=[c,l]:n[s]=l}}return n},_.route=function(t,e){_.handlers.push({routePattern:t,callback:e})},_.loadUrl=function(e){var n=_.handlers,r=null,i=e,o=e.indexOf("?");if(-1!=o&&(i=e.substring(0,o),r=e.substr(o+1)),_.relativeToParentRouter){var s=this.parent.activeInstruction();i=-1==o?s.params.join("/"):s.params.slice(0,-1).join("/"),i&&"/"==i.charAt(0)&&(i=i.substr(1)),i||(i=""),i=i.replace("//","/").replace("//","/")}i=i.replace(y,"");for(var l=0;l<n.length;l++){var c=n[l];if(c.routePattern.test(i))return c.callback(i,r),!0}return t.log("Route Not Found",e,D),_.trigger("router:route:not-found",e,_),_.parent&&(k=x),a.navigate(k,{trigger:!1,replace:!0}),v.explicitNavigation=!1,v.navigatingBack=!1,!1};var U;return o.isObservable(e.title)&&e.title.subscribe(function(){var t=_.activeInstruction(),e=null!=t?o.unwrap(t.config.title):"";V(e)}),_.updateDocumentTitle=function(t,n){var r=o.unwrap(e.title),i=n.config.title;U&&U.dispose(),i?o.isObservable(i)?(U=i.subscribe(V),V(i())):V(i):r&&(document.title=r)},_.navigate=function(e,n){return e&&-1!=e.indexOf("://")?(window.location.href=e,!0):((void 0===n||t.isBoolean(n)&&n||t.isObject(n)&&n.trigger)&&(v.explicitNavigation=!0),(t.isBoolean(n)&&!n||n&&void 0!=n.trigger&&!n.trigger)&&(k=e),a.navigate(e,n))},_.navigateBack=function(){a.navigateBack()},_.attached=function(){_.trigger("router:navigation:attached",E,D,_)},_.compositionComplete=function(){O(!1),_.trigger("router:navigation:composition-complete",E,D,_),P()},_.convertRouteToHash=function(t){if(t=t.replace(/\*.*$/,""),_.relativeToParentRouter){var e=_.parent.activeInstruction(),n=t?e.config.hash+"/"+t:e.config.hash;return a._hasPushState&&(n="/"+n),n=n.replace("//","/").replace("//","/")}return a._hasPushState?t:"#"+t},_.convertRouteToModuleId=function(t){return c(t)},_.convertRouteToTitle=function(t){var e=c(t);return e.substring(0,1).toUpperCase()+e.substring(1)},_.map=function(e,n){if(t.isArray(e)){for(var r=0;r<e.length;r++)_.map(e[r]);return _}return t.isString(e)||t.isRegExp(e)?(n?t.isString(n)&&(n={moduleId:n}):n={},n.route=e):n=e,C(n)},_.buildNavigationModel=function(e){for(var n=[],r=_.routes,i=e||100,a=0;a<r.length;a++){var o=r[a];o.nav&&(t.isNumber(o.nav)||(o.nav=++i),n.push(o))}return n.sort(function(t,e){return t.nav-e.nav}),_.navigationModel(n),_},_.mapUnknownRoutes=function(e,n){var r="*catchall",i=l(r);return _.route(i,function(o,s){var l=N(i,o,s),c={fragment:o,queryString:s,config:{route:r,routePattern:i},params:l.params,queryParams:l.queryParams};if(e)if(t.isString(e))c.config.moduleId=e,n&&a.navigate(n,{trigger:!1,replace:!0});else if(t.isFunction(e)){var u=e(c);if(u&&u.then)return void u.then(function(){_.trigger("router:route:before-config",c.config,_),_.trigger("router:route:after-config",c.config,_),R(c)})}else c.config=e,c.config.route=r,c.config.routePattern=i;else c.config.moduleId=o;_.trigger("router:route:before-config",c.config,_),_.trigger("router:route:after-config",c.config,_),R(c)}),_},_.reset=function(){return D=E=void 0,_.handlers=[],_.routes=[],_.off(),delete _.options,_},_.makeRelative=function(e){return t.isString(e)&&(e={moduleId:e,route:e}),e.moduleId&&!u(e.moduleId,"/")&&(e.moduleId+="/"),e.route&&!u(e.route,"/")&&(e.route+="/"),e.fromParent&&(_.relativeToParentRouter=!0),_.on("router:route:before-config").then(function(t){e.moduleId&&(t.moduleId=e.moduleId+t.moduleId),e.route&&(""===t.route?t.route=e.route.substring(0,e.route.length-1):t.route=e.route+t.route)}),e.dynamicHash&&(_.on("router:route:after-config").then(function(t){t.routePattern=l(t.route?e.dynamicHash+"/"+t.route:e.dynamicHash),t.dynamicHash=t.dynamicHash||o.observable(t.hash)}),_.on("router:route:before-child-routes").then(function(t,e,n){for(var r=t.router,i=0;i<r.routes.length;i++){var a=r.routes[i],o=e.params.slice(0);a.hash=r.convertRouteToHash(a.route).replace(m,function(t){return o.length>0?o.shift():t}),a.dynamicHash(a.hash)}})),_},_.createChildRouter=function(){var t=A();return t.parent=_,t},_};return v=A(),v.explicitNavigation=!1,v.navigatingBack=!1,v.makeRoutesCaseSensitive=function(){w=!0},v.targetIsThisWindow=function(t){var e=s(t.target).attr("target");return!e||e===window.name||"_self"===e||"top"===e&&window===window.top?!0:!1},v.activate=function(e){return t.defer(function(n){if(f=n,v.options=t.extend({routeHandler:v.loadUrl},v.options,e),a.activate(v.options),a._hasPushState)for(var r=v.routes,i=r.length;i--;){var o=r[i];o.hash=o.hash.replace("#","/")}var l=v.options.root&&new RegExp("^"+v.options.root+"/");s(document).delegate("a","click",function(t){if(a._hasPushState){if(!t.altKey&&!t.ctrlKey&&!t.metaKey&&!t.shiftKey&&v.targetIsThisWindow(t)){var e=s(this).attr("href");null==e||"#"===e.charAt(0)||/^[a-z]+:/i.test(e)||(v.explicitNavigation=!0,t.preventDefault(),l&&(e=e.replace(l,"")),a.navigate(e))}}else v.explicitNavigation=!0}),a.options.silent&&f&&(f.resolve(),f=null)}).promise()},v.deactivate=function(){a.deactivate()},v.install=function(){o.bindingHandlers.router={init:function(){return{controlsDescendantBindings:!0}},update:function(t,e,n,r,a){var s=o.utils.unwrapObservable(e())||{};if(s.__router__)s={model:s.activeItem(),attached:s.attached,compositionComplete:s.compositionComplete,activate:!1};else{var l=o.utils.unwrapObservable(s.router||r.router)||v;s.model=l.activeItem(),s.attached=l.attached,s.compositionComplete=l.compositionComplete,s.activate=!1}i.compose(t,s,a)}},o.virtualElements.allowedBindings.router=!0},v}),n("viewmodels/admin",["plugins/router"],function(t){var e=t.createChildRouter().map([{route:["admin/users","admin"],moduleId:"viewmodels/admin-users",title:"Users",nav:!0},{route:"admin/log",moduleId:"viewmodels/admin-log",title:"Log",nav:!0}]).buildNavigationModel();return{router:e}}),n("viewmodels/album-browse",["repositories/albumRepository","repositories/queueRepository"],function(t,e){var n=ko.observable();return{album:n,queueTrack:function(t){t.ReasonExpanded(!1),e.queueTrack(t)},expandReason:function(t){t.IsAlreadyQueued()||(t.ReasonExpanded()?t.ReasonExpanded(!1):t.ReasonExpanded(!0))},activate:function(e,r){return t.getAlbum(n,e,r)}}}),n("viewmodels/artist-browse",["repositories/artistRepository"],function(t){var e={albums:"albums",similarArtists:"similarArtists"},n=ko.observable(e.albums),r=ko.observable(),i=function(){n(e.albums)},a=function(){n(e.similarArtists)};return{tabs:e,currentTab:n,artist:r,showAlbums:i,showSimilarArtists:a,activate:function(e,n){return t.getArtist(r,e,n)}}}),n("viewmodels/history",["repositories/historyRepository","repositories/queueRepository"],function(t,e){var n=ko.observableArray([]),r=ko.observable(),i=ko.observable(!1),a=function(e){return e&&n([]),t.getHistory(n,i,r())};return{history:n,filter:r,showMore:ko.computed(function(){return n().length>0&&i()}),getMoreHistory:function(){return a(!1)},queueTrack:function(t){t.ReasonExpanded(!1),e.queueTrack(t)},expandReason:function(t){t.IsAlreadyQueued()||(t.ReasonExpanded()?t.ReasonExpanded(!1):t.ReasonExpanded(!0))},activate:function(t){return r(t||"all"),a(!0)}}}),n("viewmodels/likes",["repositories/likesRepository","repositories/queueRepository"],function(t,e){var n=ko.observableArray([]),r=ko.observable(!1),i=function(e){return e&&n([]),t.getLikes(n,r)};return{likes:n,queueTrack:function(t){t.ReasonExpanded(!1),e.queueTrack(t)},expandReason:function(t){t.IsAlreadyQueued()||(t.ReasonExpanded()?t.ReasonExpanded(!1):t.ReasonExpanded(!0))},getMoreLikes:function(){return i(!1)},showMore:ko.computed(function(){return n.length>0&&r()}),activate:function(){return i(!0)}}}),n("viewmodels/now-playing",["durandal/app","repositories/queueRepository"],function(t,e){var n={playingSoon:"playingSoon",recentlyPlayed:"recentlyPlayed"},r=ko.observable(null),i=ko.observableArray(),a=ko.observableArray(),o=ko.observable(n.playingSoon),s=ko.observable(),l=ko.observable(),c=ko.computed(function(){if(!r())return 0;var t=Date.parse(r().StartedPlayingDateTime()),e=s(),n=e-(t+r().PausedDurationAsMilliseconds());return n>r().Track.DurationMilliseconds()&&(n=r().Track.DurationMilliseconds()),n}),u=function(){(null==s()||null!=r()&&!r().IsPaused())&&s((new Date).getTime())},d=$.connection.queueHub,p=function(){d.server.getCurrentTrack(),d.server.getPlayingSoon(),d.server.getRecentlyPlayed(),d.server.getCurrentVolume()};return d.client.updateCurrentTrack=function(t){t&&(r(ko.mapping.fromJS(t)),u())},d.client.updateCurrentVolume=function(t){null!==t&&void 0!==t&&l(t)},d.client.updatePlayingSoon=function(t){var e=ko.mapping.fromJS(t)();ko.utils.arrayForEach(e,function(t){var e={queueActionsShown:ko.observable(!1)};$.extend(t,e)}),i(e)},d.client.updateRecentlyPlayed=function(t){var e=ko.mapping.fromJS(t).PageData();ko.utils.arrayForEach(e,function(t){var e={ReasonExpanded:ko.observable(!1)};$.extend(t.Track,e)}),a(e)},{tabs:n,isAdmin:t.isAdmin,isSuperAdmin:t.isSuperAdmin,nowPlaying:r,playingSoon:i,recentlyPlayed:a,currentTab:o,currentTime:s,currentVolume:l,showPlayingSoon:function(){o(n.playingSoon)},showRecentlyPlayed:function(){o(n.recentlyPlayed)},vetoTrack:function(t){d.server.vetoTrack(t.Id())},likeTrack:function(t){d.server.likeTrack(t.Id())},nextTrack:function(t){d.server.nextTrack(t.Id())},forgetTrack:function(t){d.server.forgetTrack(t.Id())},pausePlayTrack:function(){r()&&(r().IsPaused()?d.server.resumeTrack():d.server.pauseTrack())},increaseVolume:function(){d.server.increaseVolume()},decreaseVolume:function(){d.server.decreaseVolume()},positionAsMilliseconds:c,positionAsPercent:ko.computed(function(){if(null==r())return 0;var t=r().Track.DurationMilliseconds();return c()/t*100}),queueTrack:function(t){t.ReasonExpanded(!1),e.queueTrack(t)},expandReason:function(t){t.IsAlreadyQueued()||(t.ReasonExpanded()?t.ReasonExpanded(!1):t.ReasonExpanded(!0))},showQueueActions:function(t){t.StartedPlayingDateTime()||t.queueActionsShown(!0)},hideQueueActions:function(t){t.StartedPlayingDateTime()||t.queueActionsShown(!1)},activate:function(){return $.connection.hub.state===$.signalR.connectionState.disconnected?(setInterval(function(){u()},500),$.connection.hub.start({transport:["webSockets","serverSentEvents","longPolling"]}).done(function(){p()})):void 0}}}),n("viewmodels/queue",["repositories/queueRepository"],function(t){var e=ko.observableArray();return{queue:e,activate:function(){return t.getQueue(e)}}}),n("viewmodels/search-bar",["plugins/router","repositories/searchRepository"],function(t,e){var n=ko.observableArray(),r=ko.observable(),i=ko.observable("");return{searchTerm:i,providers:n,provider:r,providerName:ko.computed(function(){return r()?r().Name():""}),providersVisible:ko.computed(function(){return n().length>1}),activate:function(){return e.getActiveProviders(n).then(function(){r(n()[0])})},selectProvider:function(t){r(t)},selectedProviderIcon:ko.computed(function(){return r()?"/Content/styles/Images/"+r().Name()+"logo.png":"/Content/styles/Images/nullLogo.png"}),doSearch:function(){if(i()){var e={provider:r().Identifier(),searchTerm:i()};t.navigate("#search-results?"+$.param(e),{trigger:!0})}}}}),n("viewmodels/search-results",["repositories/searchRepository","repositories/queueRepository"],function(t,e){var n={artists:"artists",albums:"albums",tracks:"tracks"},r=ko.observable(),i=ko.observable(n.artists),a=ko.observable(),o=function(t){i(t)},s=function(){o(n.artists)},l=function(){o(n.albums)},c=function(){o(n.tracks)};return{tabs:n,currentTab:i,searchedFor:a,results:r,showArtists:s,showAlbums:l,showTracks:c,queueTrack:function(t){t.ReasonExpanded(!1),e.queueTrack(t)},expandReason:function(t){t.IsAlreadyQueued()||(t.ReasonExpanded()?t.ReasonExpanded(!1):t.ReasonExpanded(!0))},activate:function(e){return a(e.searchTerm),t.doSearch(r,e.provider,e.searchTerm).then(function(){i(r().PagedArtists.Artists().length>0?n.artists:r().PagedAlbums.Albums().length>0?n.albums:r().PagedTracks.Tracks().length>0?n.tracks:n.artists)})}}}),n("viewmodels/shell",["plugins/router","durandal/app"],function(t,e){return{authorizedRoutes:ko.computed(function(){return t.navigationModel().filter(function(t){return t.settings&&t.settings.admin?e.isSuperAdmin():!0})}),router:t,activate:function(){return t.map([{route:["now-playing",""],moduleId:"viewmodels/now-playing",title:"Now Playing",nav:!0},{route:"queue",moduleId:"viewmodels/queue",title:"Queue",nav:!0},{route:"history(/:filter)",moduleId:"viewmodels/history",title:"History",hash:"#history",nav:!0},{route:"likes",moduleId:"viewmodels/likes",title:"Likes",nav:!0},{route:"admin*details",moduleId:"viewmodels/admin",title:"Admin",hash:"#admin",nav:!0,settings:{admin:!0}},{route:"artists/:provider/:link",moduleId:"viewmodels/artist-browse",title:"Browse Artist",nav:!1},{route:"albums/:provider/:link",moduleId:"viewmodels/album-browse",title:"Browse Album",nav:!1},{route:"search-results",moduleId:"viewmodels/search-results",title:"Search Results",nav:!1}]).buildNavigationModel().activate()}}}),n("plugins/dialog",["durandal/system","durandal/app","durandal/composition","durandal/activator","durandal/viewEngine","jquery","knockout"],function(t,e,n,r,i,a,o){function s(e){return t.defer(function(n){t.isString(e)?t.acquire(e).then(function(e){n.resolve(t.resolveObject(e))}).fail(function(n){t.error("Failed to load dialog module ("+e+"). Details: "+n.message)}):n.resolve(e)}).promise()}var l,c={},u=o.observable(0),d=function(t,e,n,r,i){this.message=t,this.title=e||d.defaultTitle,this.options=n||d.defaultOptions,this.autoclose=r||!1,this.settings=a.extend({},d.defaultSettings,i)};return d.prototype.selectOption=function(t){l.close(this,t)},d.prototype.getView=function(){return i.processMarkup(d.defaultViewMarkup)},d.setViewUrl=function(t){delete d.prototype.getView,d.prototype.viewUrl=t},d.defaultTitle=e.title||"Application",d.defaultOptions=["Ok"],d.defaultSettings={buttonClass:"btn btn-default",primaryButtonClass:"btn-primary autofocus",secondaryButtonClass:"","class":"modal-content messageBox",style:null},d.setDefaults=function(t){a.extend(d.defaultSettings,t)},d.prototype.getButtonClass=function(t){var e="";return this.settings&&(this.settings.buttonClass&&(e=this.settings.buttonClass),0===t()&&this.settings.primaryButtonClass&&(e.length>0&&(e+=" "),e+=this.settings.primaryButtonClass),t()>0&&this.settings.secondaryButtonClass&&(e.length>0&&(e+=" "),e+=this.settings.secondaryButtonClass)),e},d.prototype.getClass=function(){return this.settings?this.settings["class"]:"messageBox"},d.prototype.getStyle=function(){return this.settings?this.settings.style:null},d.prototype.getButtonText=function(e){var n=a.type(e);return"string"===n?e:"object"===n?"string"===a.type(e.text)?e.text:(t.error("The object for a MessageBox button does not have a text property that is a string."),null):(t.error("Object for a MessageBox button is not a string or object but "+n+"."),null)},d.prototype.getButtonValue=function(e){var n=a.type(e);return"string"===n?e:"object"===n?"undefined"===a.type(e.text)?(t.error("The object for a MessageBox button does not have a value property defined."),null):e.value:(t.error("Object for a MessageBox button is not a string or object but "+n+"."),null)},d.defaultViewMarkup=['<div data-view="plugins/messageBox" data-bind="css: getClass(), style: getStyle()">','<div class="modal-header">','<h3 data-bind="html: title"></h3>',"</div>",'<div class="modal-body">','<p class="message" data-bind="html: message"></p>',"</div>",'<div class="modal-footer">',"<!-- ko foreach: options -->",'<button data-bind="click: function () { $parent.selectOption($parent.getButtonValue($data)); }, text: $parent.getButtonText($data), css: $parent.getButtonClass($index)"></button>',"<!-- /ko -->",'<div style="clear:both;"></div>',"</div>","</div>"].join("\n"),l={MessageBox:d,currentZIndex:1050,getNextZIndex:function(){return++this.currentZIndex},isOpen:o.computed(function(){return u()>0}),getContext:function(t){return c[t||"default"]},addContext:function(t,e){e.name=t,c[t]=e;var n="show"+t.substr(0,1).toUpperCase()+t.substr(1);this[n]=function(e,n){return this.show(e,n,t)}},createCompositionSettings:function(t,e){var n={model:t,activate:!1,transition:!1};return e.binding&&(n.binding=e.binding),e.attached&&(n.attached=e.attached),e.compositionComplete&&(n.compositionComplete=e.compositionComplete),n},getDialog:function(t){return t?t.__dialog__:void 0},close:function(t){var e=this.getDialog(t);if(e){var n=Array.prototype.slice.call(arguments,1);e.close.apply(e,n)}},show:function(e,i,a){var o=this,l=c[a||"default"];return t.defer(function(t){s(e).then(function(e){var a=r.create();a.activateItem(e,i).then(function(r){if(r){var i=e.__dialog__={owner:e,context:l,activator:a,close:function(){var n=arguments;a.deactivateItem(e,!0).then(function(r){r&&(u(u()-1),l.removeHost(i),delete e.__dialog__,0===n.length?t.resolve():1===n.length?t.resolve(n[0]):t.resolve.apply(t,n))})}};i.settings=o.createCompositionSettings(e,l),l.addHost(i),u(u()+1),n.compose(i.host,i.settings)}else t.resolve(!1)})})}).promise()},showMessage:function(e,n,r,i,a){return t.isString(this.MessageBox)?l.show(this.MessageBox,[e,n||d.defaultTitle,r||d.defaultOptions,i||!1,a||{}]):l.show(new this.MessageBox(e,n,r,i,a))},install:function(t){e.showDialog=function(t,e,n){return l.show(t,e,n)},e.closeDialog=function(){return l.close.apply(l,arguments)},e.showMessage=function(t,e,n,r,i){return l.showMessage(t,e,n,r,i)},t.messageBox&&(l.MessageBox=t.messageBox),t.messageBoxView&&(l.MessageBox.prototype.getView=function(){return i.processMarkup(t.messageBoxView)}),t.messageBoxViewUrl&&l.MessageBox.setViewUrl(t.messageBoxViewUrl)}},l.addContext("default",{blockoutOpacity:.2,removeDelay:200,addHost:function(t){var e=a("body"),n=a('<div class="modalBlockout"></div>').css({"z-index":l.getNextZIndex(),opacity:this.blockoutOpacity}).appendTo(e),r=a('<div class="modalHost"></div>').css({"z-index":l.getNextZIndex()}).appendTo(e);if(t.host=r.get(0),t.blockout=n.get(0),!l.isOpen()){t.oldBodyMarginRight=e.css("margin-right"),t.oldInlineMarginRight=e.get(0).style.marginRight;var i=a("html"),o=e.outerWidth(!0),s=i.scrollTop();a("html").css("overflow-y","hidden");var c=a("body").outerWidth(!0);e.css("margin-right",c-o+parseInt(t.oldBodyMarginRight,10)+"px"),i.scrollTop(s)}},removeHost:function(t){if(a(t.host).css("opacity",0),a(t.blockout).css("opacity",0),setTimeout(function(){o.removeNode(t.host),o.removeNode(t.blockout)},this.removeDelay),!l.isOpen()){var e=a("html"),n=e.scrollTop();e.css("overflow-y","").scrollTop(n),t.oldInlineMarginRight?a("body").css("margin-right",t.oldBodyMarginRight):a("body").css("margin-right","")}},attached:function(t){a(t).css("visibility","hidden")},compositionComplete:function(t,e,n){var r=l.getDialog(n.model),i=a(t),o=i.find("img").filter(function(){var t=a(this);return!(this.style.width&&this.style.height||t.attr("width")&&t.attr("height"))});i.data("predefinedWidth",i.get(0).style.width);var s=function(t,e){setTimeout(function(){var n=a(t);e.context.reposition(t),a(e.host).css("opacity",1),n.css("visibility","visible"),n.find(".autofocus").first().focus()},1)};s(t,r),o.load(function(){s(t,r)}),(i.hasClass("autoclose")||n.model.autoclose)&&a(r.blockout).click(function(){r.close()})},reposition:function(t){var e=a(t),n=a(window);e.data("predefinedWidth")||e.css({width:""});var r=e.outerWidth(!1),i=e.outerHeight(!1),o=n.height()-10,s=n.width()-10,l=Math.min(i,o),c=Math.min(r,s);e.css({"margin-top":(-l/2).toString()+"px","margin-left":(-c/2).toString()+"px"}),i>o?e.css("overflow-y","auto").outerHeight(o):e.css({"overflow-y":"",height:""}),r>s?e.css("overflow-x","auto").outerWidth(s):(e.css("overflow-x",""),e.data("predefinedWidth")?e.css("width",e.data("predefinedWidth")):e.outerWidth(c))}}),l}),n("plugins/http",["jquery","knockout"],function(t,e){return{callbackParam:"callback",toJSON:function(t){return e.toJSON(t)},get:function(n,r,i){return t.ajax(n,{data:r,headers:e.toJS(i)})},jsonp:function(n,r,i,a){return-1==n.indexOf("=?")&&(i=i||this.callbackParam,n+=-1==n.indexOf("?")?"?":"&",n+=i+"=?"),t.ajax({url:n,dataType:"jsonp",data:r,headers:e.toJS(a)})},put:function(n,r,i){return t.ajax({url:n,data:this.toJSON(r),type:"PUT",contentType:"application/json",dataType:"json",headers:e.toJS(i)})},post:function(n,r,i){return t.ajax({url:n,data:this.toJSON(r),type:"POST",contentType:"application/json",dataType:"json",headers:e.toJS(i)})},remove:function(n,r,i){return t.ajax({url:n,data:r,type:"DELETE",headers:e.toJS(i)})}}}),n("plugins/observable",["durandal/system","durandal/binder","knockout"],function(t,e,n){function r(t){var e=t[0];return"_"===e||"$"===e||A&&t===A}function i(e){return!(!e||void 0===e.nodeType||!t.isNumber(e.nodeType))}function a(t){if(!t||i(t)||t.ko===n||t.jquery)return!1;var e=v.call(t);return-1==g.indexOf(e)&&!(t===!0||t===!1)}function o(t){var e={};return Object.defineProperty(t,"__observable__",{enumerable:!1,configurable:!1,writable:!1,value:e}),e}function s(t,e,n){var r=t.__observable__,i=!0;if(!r||!r.__full__){r=r||o(t),r.__full__=!0,y.forEach(function(n){e[n]=function(){return w[n].apply(t,arguments)}}),m.forEach(function(n){t[n]=function(){i=!1;var t=k[n].apply(e,arguments);return i=!0,t}}),b.forEach(function(n){t[n]=function(){i&&e.valueWillMutate();var r=w[n].apply(t,arguments);return i&&e.valueHasMutated(),r}}),h.forEach(function(r){t[r]=function(){for(var a=0,o=arguments.length;o>a;a++)l(arguments[a],n);i&&e.valueWillMutate();var s=w[r].apply(t,arguments);return i&&e.valueHasMutated(),s}}),t.splice=function(){for(var r=2,a=arguments.length;a>r;r++)l(arguments[r],n);i&&e.valueWillMutate();var o=w.splice.apply(t,arguments);return i&&e.valueHasMutated(),o};for(var a=0,s=t.length;s>a;a++)l(t[a],n)}}function l(e,r){var i,l;if(A&&e&&e[A]&&(r=r?r.slice(0):[],r.push(e[A])),a(e)&&(i=e.__observable__,!i||!i.__full__)){if(i=i||o(e),i.__full__=!0,t.isArray(e)){var c=n.observableArray(e);s(e,c,r)}else for(var p in e)if(!f(p)&&!i[p]){var v=Object.getPropertyDescriptor(e,p);v&&(v.get||v.set)?d(e,p,{get:v.get,set:v.set}):(l=e[p],t.isFunction(l)||u(e,p,l,r))}x&&t.log("Converted",e)}}function c(t,e,n){n?e?e.destroyAll||s(e,t):(e=[],s(e,t)):l(e),t(e)}function u(e,r,i,a){var u,d,p=e.__observable__||o(e);if(void 0===i&&(i=e[r]),t.isArray(i))u=n.observableArray(i),s(i,u,a),d=!0;else if("function"==typeof i){if(!n.isObservable(i))return null;u=i}else!T&&t.isPromise(i)?(u=n.observable(),i.then(function(e){if(t.isArray(e)){var r=n.observableArray(e);s(e,r,a),e=r}u(e)})):(u=n.observable(i),l(i,a));return a&&a.length>0&&a.forEach(function(n){t.isArray(i)?u.subscribe(function(t){n(e,r,null,t)},null,"arrayChange"):u.subscribe(function(t){n(e,r,t,null)})}),Object.defineProperty(e,r,{configurable:!0,enumerable:!0,get:u,set:n.isWriteableObservable(u)?function(e){e&&t.isPromise(e)&&!T?e.then(function(e){c(u,e,t.isArray(e))}):c(u,e,d)}:void 0}),p[r]=u,u}function d(e,r,i){var a,o={owner:e,deferEvaluation:!0};return"function"==typeof i?o.read=i:("value"in i&&t.error('For defineProperty, you must not specify a "value" for the property. You must provide a "get" function.'),"function"!=typeof i.get&&"function"!=typeof i.read&&t.error('For defineProperty, the third parameter must be either an evaluator function, or an options object containing a function called "get".'),
o.read=i.get||i.read,o.write=i.set||i.write),a=n.computed(o),e[r]=a,u(e,r,a)}var p,f,v=Object.prototype.toString,g=["[object Function]","[object String]","[object Boolean]","[object Number]","[object Date]","[object RegExp]"],m=["remove","removeAll","destroy","destroyAll","replace"],b=["pop","reverse","sort","shift","slice"],h=["push","unshift"],y=["filter","map","reduce","reduceRight","forEach","every","some"],w=Array.prototype,k=n.observableArray.fn,x=!1,A=void 0,T=!1;if(!("getPropertyDescriptor"in Object)){var S=Object.getOwnPropertyDescriptor,I=Object.getPrototypeOf;Object.getPropertyDescriptor=function(t,e){for(var n,r=t;r&&!(n=S(r,e));)r=I(r);return n}}return p=function(t,e){var r,i,a;return t?(r=t.__observable__,r&&(i=r[e])?i:(a=t[e],n.isObservable(a)?a:u(t,e,a))):null},p.defineProperty=d,p.convertProperty=u,p.convertObject=l,p.install=function(t){var n=e.binding;e.binding=function(t,e,r){r.applyBindings&&!r.skipConversion&&l(t),n(t,e)},x=t.logConversion,t.changeDetection&&(A=t.changeDetection),T=t.skipPromises,f=t.shouldIgnorePropertyName||r},p}),n("plugins/serializer",["durandal/system"],function(t){return{typeAttribute:"type",space:void 0,replacer:function(t,e){if(t){var n=t[0];if("_"===n||"$"===n)return void 0}return e},serialize:function(e,n){return n=void 0===n?{}:n,(t.isString(n)||t.isNumber(n))&&(n={space:n}),JSON.stringify(e,n.replacer||this.replacer,n.space||this.space)},getTypeId:function(t){return t?t[this.typeAttribute]:void 0},typeMap:{},registerType:function(){var e=arguments[0];if(1==arguments.length){var n=e[this.typeAttribute]||t.getModuleId(e);this.typeMap[n]=e}else this.typeMap[e]=arguments[1]},reviver:function(t,e,n,r){var i=n(e);if(i){var a=r(i);if(a)return a.fromJSON?a.fromJSON(e):new a(e)}return e},deserialize:function(t,e){var n=this;e=e||{};var r=e.getTypeId||function(t){return n.getTypeId(t)},i=e.getConstructor||function(t){return n.typeMap[t]},a=e.reviver||function(t,e){return n.reviver(t,e,r,i)};return JSON.parse(t,a)},clone:function(t,e){return this.deserialize(this.serialize(t,e),e)}}}),n("plugins/widget",["durandal/system","durandal/composition","jquery","knockout"],function(t,e,n,r){function i(t,n){var i=r.utils.domData.get(t,l);i||(i={parts:e.cloneNodes(r.virtualElements.childNodes(t))},r.virtualElements.emptyNode(t),r.utils.domData.set(t,l,i)),n.parts=i.parts}var a={},o={},s=["model","view","kind"],l="durandal-widget-data",c={getSettings:function(e){var n=r.utils.unwrapObservable(e())||{};if(t.isString(n))return{kind:n};for(var i in n)-1!=r.utils.arrayIndexOf(s,i)?n[i]=r.utils.unwrapObservable(n[i]):n[i]=n[i];return n},registerKind:function(t){r.bindingHandlers[t]={init:function(){return{controlsDescendantBindings:!0}},update:function(e,n,r,a,o){var s=c.getSettings(n);s.kind=t,i(e,s),c.create(e,s,o,!0)}},r.virtualElements.allowedBindings[t]=!0,e.composeBindings.push(t+":")},mapKind:function(t,e,n){e&&(o[t]=e),n&&(a[t]=n)},mapKindToModuleId:function(t){return a[t]||c.convertKindToModulePath(t)},convertKindToModulePath:function(t){return"widgets/"+t+"/viewmodel"},mapKindToViewId:function(t){return o[t]||c.convertKindToViewPath(t)},convertKindToViewPath:function(t){return"widgets/"+t+"/view"},createCompositionSettings:function(t,e){return e.model||(e.model=this.mapKindToModuleId(e.kind)),e.view||(e.view=this.mapKindToViewId(e.kind)),e.preserveContext=!0,e.activate=!0,e.activationData=e,e.mode="templated",e},create:function(t,n,r,i){i||(n=c.getSettings(function(){return n},t));var a=c.createCompositionSettings(t,n);e.compose(t,a,r)},install:function(t){if(t.bindingName=t.bindingName||"widget",t.kinds)for(var n=t.kinds,a=0;a<n.length;a++)c.registerKind(n[a]);r.bindingHandlers[t.bindingName]={init:function(){return{controlsDescendantBindings:!0}},update:function(t,e,n,r,a){var o=c.getSettings(e);i(t,o),c.create(t,o,a,!0)}},e.composeBindings.push(t.bindingName+":"),r.virtualElements.allowedBindings[t.bindingName]=!0}};return c}),n("transitions/entrance",["durandal/system","durandal/composition","jquery"],function(t,e,n){function r(t,e){t.classList.remove(e?"entrance-in-fade":"entrance-in"),t.classList.remove("entrance-out")}var i=100,a={left:"0px",opacity:1},o={left:"",top:"",right:"",bottom:"",position:"",opacity:""},s=navigator.userAgent.match(/Trident/)||navigator.userAgent.match(/MSIE/),l=!1,c="Webkit Moz O ms Khtml".split(" "),u=document.createElement("div");if(void 0!==u.style.animationName&&(l=!0),!l)for(var d=0;d<c.length;d++)if(void 0!==u.style[c[d]+"AnimationName"]){l=!0;break}l?s?t.log("Using CSS3/jQuery mixed animations."):t.log("Using CSS3 animations."):t.log("Using jQuery animations.");var p=function(e){return t.defer(function(t){function c(){t.resolve()}function u(){e.keepScrollPosition||n(document).scrollTop(0)}function d(){u(),e.triggerAttach(),l?(r(e.child,v),e.child.classList.add(v?"entrance-in-fade":"entrance-in"),setTimeout(function(){r(e.child,v),e.activeView&&r(e.activeView,v),f.css(o),c()},p)):f.animate(a,{duration:p,easing:"swing",always:function(){f.css(o),c()}})}if(e.child){var p=e.duration||500,f=n(e.child),v=!!e.fadeOnly,g={display:"block",opacity:0,position:"absolute",left:v||l?"0px":"20px",right:0,top:0,bottom:0};f.css(g),e.activeView?l&&!s?(r(e.activeView,v),e.activeView.classList.add("entrance-out"),setTimeout(d,i)):n(e.activeView).fadeOut({duration:i,always:d}):d()}else n(e.activeView).fadeOut(i,c)}).promise()};return p}),n("text",["module"],function(t){"use strict";var n,r,i,a,o=["Msxml2.XMLHTTP","Microsoft.XMLHTTP","Msxml2.XMLHTTP.4.0"],s=/^\s*<\?xml(\s)+version=[\'\"](\d)*.(\d)*[\'\"](\s)*\?>/im,l=/<body[^>]*>\s*([\s\S]+)\s*<\/body>/im,c="undefined"!=typeof location&&location.href,u=c&&location.protocol&&location.protocol.replace(/\:/,""),d=c&&location.hostname,p=c&&(location.port||void 0),f={},v=t.config&&t.config()||{};return n={version:"2.0.7",strip:function(t){if(t){t=t.replace(s,"");var e=t.match(l);e&&(t=e[1])}else t="";return t},jsEscape:function(t){return t.replace(/(['\\])/g,"\\$1").replace(/[\f]/g,"\\f").replace(/[\b]/g,"\\b").replace(/[\n]/g,"\\n").replace(/[\t]/g,"\\t").replace(/[\r]/g,"\\r").replace(/[\u2028]/g,"\\u2028").replace(/[\u2029]/g,"\\u2029")},createXhr:v.createXhr||function(){var t,e,n;if("undefined"!=typeof XMLHttpRequest)return new XMLHttpRequest;if("undefined"!=typeof ActiveXObject)for(e=0;3>e;e+=1){n=o[e];try{t=new ActiveXObject(n)}catch(r){}if(t){o=[n];break}}return t},parseName:function(t){var e,n,r,i=!1,a=t.indexOf("."),o=0===t.indexOf("./")||0===t.indexOf("../");return-1!==a&&(!o||a>1)?(e=t.substring(0,a),n=t.substring(a+1,t.length)):e=t,r=n||e,a=r.indexOf("!"),-1!==a&&(i="strip"===r.substring(a+1),r=r.substring(0,a),n?n=r:e=r),{moduleName:e,ext:n,strip:i}},xdRegExp:/^((\w+)\:)?\/\/([^\/\\]+)/,useXhr:function(t,e,r,i){var a,o,s,l=n.xdRegExp.exec(t);return l?(a=l[2],o=l[3],o=o.split(":"),s=o[1],o=o[0],!(a&&a!==e||o&&o.toLowerCase()!==r.toLowerCase()||(s||o)&&s!==i)):!0},finishLoad:function(t,e,r,i){r=e?n.strip(r):r,v.isBuild&&(f[t]=r),i(r)},load:function(t,e,r,i){if(i.isBuild&&!i.inlineText)return void r();v.isBuild=i.isBuild;var a=n.parseName(t),o=a.moduleName+(a.ext?"."+a.ext:""),s=e.toUrl(o),l=v.useXhr||n.useXhr;!c||l(s,u,d,p)?n.get(s,function(e){n.finishLoad(t,a.strip,e,r)},function(t){r.error&&r.error(t)}):e([o],function(t){n.finishLoad(a.moduleName+"."+a.ext,a.strip,t,r)})},write:function(t,e,r,i){if(f.hasOwnProperty(e)){var a=n.jsEscape(f[e]);r.asModule(t+"!"+e,"define(function () { return '"+a+"';});\n")}},writeFile:function(t,e,r,i,a){var o=n.parseName(e),s=o.ext?"."+o.ext:"",l=o.moduleName+s,c=r.toUrl(o.moduleName+s)+".js";n.load(l,r,function(e){var r=function(t){return i(c,t)};r.asModule=function(t,e){return i.asModule(t,c,e)},n.write(t,l,r,a)},a)}},"node"===v.env||!v.env&&"undefined"!=typeof process&&process.versions&&process.versions.node?(r=e.nodeRequire("fs"),n.get=function(t,e,n){try{var i=r.readFileSync(t,"utf8");0===i.indexOf("\ufeff")&&(i=i.substring(1)),e(i)}catch(a){n(a)}}):"xhr"===v.env||!v.env&&n.createXhr()?n.get=function(t,e,r,i){var a,o=n.createXhr();if(o.open("GET",t,!0),i)for(a in i)i.hasOwnProperty(a)&&o.setRequestHeader(a.toLowerCase(),i[a]);v.onXhr&&v.onXhr(o,t),o.onreadystatechange=function(n){var i,a;4===o.readyState&&(i=o.status,i>399&&600>i?(a=new Error(t+" HTTP status: "+i),a.xhr=o,r(a)):e(o.responseText),v.onXhrComplete&&v.onXhrComplete(o,t))},o.send(null)}:"rhino"===v.env||!v.env&&"undefined"!=typeof Packages&&"undefined"!=typeof java?n.get=function(t,e){var n,r,i="utf-8",a=new java.io.File(t),o=java.lang.System.getProperty("line.separator"),s=new java.io.BufferedReader(new java.io.InputStreamReader(new java.io.FileInputStream(a),i)),l="";try{for(n=new java.lang.StringBuffer,r=s.readLine(),r&&r.length()&&65279===r.charAt(0)&&(r=r.substring(1)),null!==r&&n.append(r);null!==(r=s.readLine());)n.append(o),n.append(r);l=String(n.toString())}finally{s.close()}e(l)}:("xpconnect"===v.env||!v.env&&"undefined"!=typeof Components&&Components.classes&&Components.interfaces)&&(i=Components.classes,a=Components.interfaces,Components.utils["import"]("resource://gre/modules/FileUtils.jsm"),n.get=function(t,e){var n,r,o={},s=new FileUtils.File(t);try{n=i["@mozilla.org/network/file-input-stream;1"].createInstance(a.nsIFileInputStream),n.init(s,1,0,!1),r=i["@mozilla.org/intl/converter-input-stream;1"].createInstance(a.nsIConverterInputStream),r.init(n,"utf-8",n.available(),a.nsIConverterInputStream.DEFAULT_REPLACEMENT_CHARACTER),r.readString(n.available(),o),r.close(),n.close(),e(o.value)}catch(l){throw new Error((s&&s.path||"")+": "+l)}}),n}),n("text!views.mobile/album-browse.html",[],function(){return'<div data-bind="with: album">\r\n    <ul class="list">\r\n        <li class="list-column">\r\n            <img data-bind="attr: { src: ArtworkUrlMedium }" class="artwork artwork-medium" />\r\n        </li>\r\n        <li class="list-column">\r\n            <div class="album-text truncated-label">\r\n                <span data-bind="text: Name"></span>&nbsp;<span data-bind="visible: Year() != 0, text: \'(\' + Year() + \')\'"></span>\r\n            </div>\r\n            <div class="truncated-label">\r\n                <span>by <span data-bind="text: Artist.Name"></span></span>\r\n            </div>\r\n        </li>\r\n    </ul>\r\n    <hr style="clear: both;" />\r\n    <table class="table-striped" style="width:100%;text-align:left;">\r\n        <tbody data-bind="foreach: Tracks">\r\n            <td style="padding: 10px 5px" data-bind="text: $index() + 1"></td>\r\n            <td data-bind="text: Name"></td>\r\n            <td data-bind="compose: \'partials/queue-button.html\'"></td>\r\n        </tbody>\r\n    </table>\r\n</div>\r\n'}),n("text!views.mobile/artist-browse.html",[],function(){return'<div data-bind="with: artist">\r\n    <ul class="list">\r\n        <li class="list-column">\r\n            <img data-bind="attr: { src: PortraitUrlMedium }" class="artwork artwork-medium" alt="artwork"/>\r\n        </li>\r\n        <li class="list-column artist-text" data-bind="text: Name"></li>\r\n    </ul>\r\n    <ul class="list" data-bind="foreach: Albums">\r\n        <li class="align-left">\r\n            <a data-bind="attr: { href: \'#albums/\' + MusicProvider.Identifier() + \'/\' + Link() }" style="color: black; cursor: pointer; text-decoration: none;">\r\n                <div class="pull-left" style="width: 95%;">\r\n                    <hr style="clear: both;" />\r\n                    <div class="list-row">\r\n                        <div class="pull-left">\r\n                            <img alt="Artist portrait" data-bind="attr: { src: ArtworkUrlSmall }" class="artwork artwork-small img-queued"/>\r\n                        </div>\r\n                        <div class="truncated-label">\r\n                            <span data-bind="text: Name"></span>\r\n                            <span data-bind="visible: Year() != 0, text: \'(\' + Year() + \')\'"></span>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n                <div class="pull-right" style="margin-top: 45px; width: 5%;">\r\n                    <i class="glyphicon glyphicon-chevron-right"></i>\r\n                </div>\r\n            </a>\r\n        </li>\r\n    </ul>\r\n</div>\r\n'}),n("text!views.mobile/history.html",[],function(){return'<div>\r\n    <div class="btn-group" style="width:100%;">\r\n        <a class="btn btn-default" style="width:33%" data-bind="attr: { href: \'#history\', disabled: filter() == \'all\' }">All</a>\r\n        <a class="btn btn-default" style="width:33%" data-bind="attr: { href: \'#history/requested\', disabled: filter() == \'requested\' }">Requested</a>\r\n        <a class="btn btn-default" style="width:33%" data-bind="attr: { href: \'#history/mine\', disabled: filter() == \'mine\' }">Mine</a>\r\n    </div>\r\n    <ul class="list vertical-spacing" data-bind="foreach: history ">\r\n        <!--ko compose: {view: \'partials/queued-track\', cacheViews: true}-->\r\n        <!--/ko-->\r\n    </ul>\r\n    <button class="btn btn-default btn-block btn-lg btn-more" data-bind="click: getMoreHistory()">Load More</button>\r\n</div>'}),n("text!views.mobile/likes.html",[],function(){return'<div>\r\n    <span data-bind="visible: likes().length==0">You haven\'t liked anything yet</span>\r\n    <ul class="list" data-bind="foreach: likes">\r\n        <!-- ko compose: \'partials/track.html\'--><!--/ko-->\r\n    </ul>\r\n    <button class="btn btn-default btn-block btn-lg btn-more" data-bind="click: getMoreLikes">Load More</button> \r\n</div>\r\n'}),n("text!views.mobile/now-playing.html",[],function(){return'<div data-bind="with: nowPlaying" >\r\n    <ul class="list" >\r\n        <li class="list-column now-playing-artwork">\r\n            <div data-bind="if: Track.TrackArtworkUrl">\r\n                <img data-bind="attr: {src: Track.TrackArtworkUrl}" class="artwork artwork-large"/>   \r\n            </div>\r\n            <div data-bind="ifnot: Track.TrackArtworkUrl">\r\n                <img data-bind="attr: {src: Track.Album.ArtworkUrlLarge}" class="artwork artwork-large"/>   \r\n            </div>                   \r\n        </li>\r\n        <li class="list-column now-playing-text">\r\n            <div class="well">\r\n                <ul class="list">                \r\n                    <li>\r\n                        <div style="line-height:25px;">\r\n                            <span data-bind="text: Track.Name"></span>\r\n                            <a data-bind="attr: { href: Track.ExternalLink(), target: \'_Blank\' }">\r\n                                <!-- ko if: Track.MusicProvider.Name() == "Spotify" -->\r\n                                <img class="provider-icon" src="/Content/styles/Images/spotifylogo.png"/>\r\n                                <!-- /ko -->\r\n                                <!-- ko if: Track.MusicProvider.Name() == "SoundCloud" -->\r\n                                <img class="provider-icon" src="/Content/styles/Images/soundcloudlogo.png"/>\r\n                                <!-- /ko -->\r\n                            </a>\r\n                        </div>\r\n                        \r\n                    </li>\r\n                    <li data-bind="if:Track.Artists">\r\n                        <ul class="comma-separated" data-bind="foreach: Track.Artists">                                                                \r\n                            <li><a data-bind="attr: {href: \'#artists/\' + MusicProvider.Identifier() + \'/\' + Link()}, text: Name"></a></li>                                \r\n                        </ul>\r\n                    </li>\r\n                    <li data-bind="if: Track.Album"><a data-bind="attr: {href: \'#albums/\' + Track.Album.MusicProvider.Identifier() + \'/\' + Track.Album.Link()}, truncated: Track.Album.Name"></a></li>\r\n                    <li class="text-small" style="padding:0px; margin:0px;">Queued by <span data-bind="text: User"></span></li>\r\n                </ul>\r\n            </div>\r\n        </li>\r\n        <li style="margin:0px; padding:0px;">\r\n            <div class="btn-toolbar">\r\n                <button class="btn btn-default btn-lg btn-action" data-bind="click: $parent.likeTrack"><i class="glyphicon glyphicon-thumbs-up"></i>&nbsp; Like &nbsp;<span class="badge badge-like" data-bind="text: LikeCount"></span></button>\r\n                <button class="btn btn-default btn-lg btn-action" data-bind="click: $parent.vetoTrack"><i class="glyphicon glyphicon-thumbs-down"></i>&nbsp; Veto &nbsp;<span class="badge badge-veto" data-bind="text: VetoCount"></span></button>\r\n            </div>\r\n        </li>\r\n    </ul>\r\n</div>\r\n<div data-bind="if: playingSoon().length">\r\n    <ul class="list" data-bind="foreach: playingSoon">        \r\n        <!--ko compose: \'partials/queued-track.html\'--><!--/ko-->\r\n    </ul>\r\n    <a data-bind="attr: { href: \'#queue\' }">\r\n        <div data-bind="if: playingSoon().length" style="margin:30px;">\r\n            See all queued tracks\r\n        </div>\r\n    </a>\r\n</div>\r\n<div data-bind="ifnot: playingSoon().length"><hr/><span class="muted">There are no tracks in the queue</span></div>'}),n("text!views.mobile/partials/queue-button.html",[],function(){return'<button class="btn btn-default" data-bind="click: $root.queueTrack, css: { disabled: IsAlreadyQueued, \'btn-success\': IsAlreadyQueued}">\r\n    <i class="glyphicon" data-bind="css: { \'glyphicon-plus\': !IsAlreadyQueued(), \'glyphicon-ok\': IsAlreadyQueued() }"></i>\r\n</button>\r\n'}),n("text!views.mobile/partials/queued-track.html",[],function(){return'<hr style="clear:both"/>\r\n<li data-bind="if: $data, event: { mouseover: $root.showQueueActions, mouseleave: $root.hideQueueActions }" class="list-row align-left"> <!--Only render if it\'s not the playing track.-->\r\n    <ul class="list">\r\n        <li class="list-column pull-left" style="padding-right:10px;">         \r\n            <div data-bind="if: Track.TrackArtworkUrl">\r\n                <img data-bind="attr: { src: Track.TrackArtworkUrl }" class="artwork artwork-small img-queued" />\r\n            </div>\r\n            <div data-bind="ifnot: Track.TrackArtworkUrl">\r\n                <img data-bind="attr: { src: Track.Album.ArtworkUrlSmall }" class="artwork artwork-small img-queued" />\r\n            </div>\r\n        </li>\r\n        <li class="list-column" style="white-space: nowrap;font-size: 12px;">\r\n            <div class="truncated-label">\r\n                <span data-bind="text: Track.Name"></span>\r\n            </div>\r\n            <div class="truncated-label">\r\n                <ul class="comma-separated" data-bind="foreach: Track.Artists">\r\n                    <!-- ko compose: {view: \'partials/track-artist\'}--><!--/ko-->\r\n                </ul>\r\n            </div> \r\n            <!-- ko if: $data.Track.Album -->\r\n            <div>\r\n                <span data-bind="attr: { href: \'#albums/\' + Track.Album.MusicProvider.Identifier() + \'/\' + Track.Album.Link() }, truncated: Track.Album.Name, truncatedLength: 85"></span>\r\n            </div>\r\n            <!-- /ko -->\r\n            <div class="truncated-label">\r\n                Queued by <span data-bind="text: User"></span>\r\n            </div>\r\n        </li>\r\n    </ul>\r\n</li> \r\n'}),n("text!views.mobile/partials/track-artist.html",[],function(){return'<li><span data-bind="text: Name"></span></li>'}),n("text!views.mobile/partials/track.html",[],function(){return'<hr style="clear:both"/>\r\n<li class="list-row align-left">\r\n    <ul class="list">\r\n        <li class="list-column pull-left" style="padding-right:10px;">\r\n             <div data-bind="if: TrackArtworkUrl()">\r\n                <img data-bind="attr: { src: TrackArtworkUrl }" class="artwork artwork-small img-queued" />\r\n            </div>\r\n            <div data-bind="ifnot: TrackArtworkUrl()">\r\n                <img data-bind="attr: { src: Album.ArtworkUrlSmall }" class="artwork artwork-small img-queued" />\r\n            </div>      \r\n        </li>\r\n        <li class="list-column pull-left" style="white-space: nowrap;font-size: 12px;">\r\n             <div class="truncated-label">\r\n                <span data-bind="text: Name"></span>&nbsp;<span data-bind="formattedDateTime: { source: DurationMilliseconds, format: \'({mm}:{ss})\' }"></span>\r\n            </div>\r\n            <div class="truncated-label">\r\n                <ul class="comma-separated" data-bind="foreach: Artists">\r\n                    <!-- ko compose: \'partials/track-artist.html\'--><!--/ko-->\r\n                </ul>\r\n            </div>\r\n            <!-- ko if: $data.Album -->\r\n            <div class="truncated-label">\r\n                <span data-bind="text: Album.Name"></span>\r\n            </div>\r\n            <!-- /ko -->\r\n        </li>\r\n        <li class="pull-right" style="margin-top:10px;" data-bind="compose: \'partials/queue-button.html\'"></li>        \r\n    </ul>\r\n</li>\r\n'}),n("text!views.mobile/queue.html",[],function(){return'<div>\r\n    <span data-bind="if: queue().length == 0">There are no tracks in the queue</span>\r\n    <ul class="list vertical-spacing" data-bind="foreach: queue">\r\n        <!--ko compose: \'partials/queued-track.html\'--><!--/ko-->\r\n    </ul>\r\n</div>'}),n("text!views.mobile/search-bar.html",[],function(){return'<form class="navbar-form" role="search" data-bind="submit: doSearch">\r\n    <div class="input-append form-group">\r\n        <input name="searchTerm" type="text" size="14" class="form-control" data-bind="value: searchTerm, valueUpdate: \'afterkeydown\'" placeholder="Search" />\r\n        <div class="btn-group" style="margin-top: 0;" data-bind="visible: providersVisible">\r\n            <span class="btn dropdown-toggle" data-toggle="dropdown">\r\n                <img data-bind="attr: { src: selectedProviderIcon }" />\r\n                <span class="caret"></span>\r\n            </span>\r\n            <ul class="dropdown-menu providers" data-bind="foreach: providers">\r\n                <li><a data-bind="click: $parent.selectProvider"><img data-bind="attr: { src: \'Content/styles/Images/\' + Name() + \'logo.png\' }" /><span data-bind="    text: Name"></span></a></li>\r\n            </ul>\r\n        </div>\r\n        <button class="btn btn-default" type="submit">\r\n            <i class="glyphicon glyphicon-search"></i>\r\n        </button>\r\n    </div>\r\n</form> '}),n("text!views.mobile/search-results.html",[],function(){return'<div style="margin: 20px 20px 10px 20px; font-size: large;">Search results for <strong data-bind="text: searchedFor"></strong></div>\r\n<div class="btn-group" style="width: 100%; margin-bottom: 5px">\r\n    <button class="btn btn-default" style="width: 33%" data-bind="click: showArtists, disable: currentTab() == tabs.artists">Artists</button>\r\n    <button class="btn btn-default" style="width: 33%" data-bind="click: showAlbums, disable: currentTab() == tabs.albums">Albums</button>\r\n    <button class="btn btn-default" style="width: 33%" data-bind="click: showTracks, disable: currentTab() == tabs.tracks">Tracks</button>\r\n</div>\r\n<div class="tab-container" data-bind="visible: currentTab() == tabs.artists, with: results().PagedArtists">\r\n    <ul class="list" data-bind="foreach: Artists">\r\n        <hr style="clear: both" />\r\n        <li data-bind="if: $data" class="list-row align-left">\r\n            <a data-bind="attr: { href: \'#artists/\' + MusicProvider.Identifier() + \'/\' + Link() }" style="color: black; cursor: pointer; text-decoration: none;">\r\n                <div class="pull-left" style="width:95%;">\r\n                    <ul class="list" style="height: 60px;">\r\n                        <li class="list-column pull-left" style="padding-right: 10px;">\r\n                            <div>\r\n                                <img data-bind="attr: { src: PortraitUrlSmall }" class="artwork artwork-small img-queued" />\r\n                            </div>\r\n                        </li>\r\n                        <li class="list-column" style="white-space: nowrap; font-size: 12px;">\r\n                            <div class="truncated-label">\r\n                                <span data-bind="text: Name"></span>\r\n                            </div>\r\n                        </li>\r\n                    </ul>\r\n                </div>\r\n                <div class="pull-right" style="margin-top: 20px;width:5%;">\r\n                    <i class="glyphicon glyphicon-chevron-right"></i>\r\n                </div>\r\n            </a>\r\n        </li>\r\n    </ul>\r\n    <hr />\r\n    <div class="muted" data-bind="ifnot: Artists().length">No artists were found</div>\r\n</div>\r\n<div class="tab-container" data-bind="visible: currentTab() == tabs.albums, with: results().PagedAlbums">\r\n    <ul class="list" data-bind="foreach: Albums">\r\n        <hr style="clear: both" />\r\n        <li data-bind="if: $data" class="list-row align-left">\r\n            <a data-bind="attr: { href: \'#albums/\' + MusicProvider.Identifier() + \'/\' + Link() }" style="color: black; cursor: pointer; text-decoration: none;">\r\n                <div class="pull-left" style="width:95%;">\r\n                    <ul class="list" style="height: 60px;">\r\n                        <li class="list-column pull-left" style="padding-right: 10px;">\r\n                            <div>\r\n                                <img data-bind="attr: { src: ArtworkUrlSmall }" class="artwork artwork-small img-queued" />\r\n                            </div>\r\n                        </li>\r\n                        <li class="list-column" style="white-space: nowrap; font-size: 12px;">\r\n                            <div class="truncated-label">\r\n                                <span data-bind="text: Name"></span>&nbsp;<span data-bind="    visible: Year() != 0, text: \'(\' + Year() + \')\'"></span>\r\n                            </div>\r\n                            <div>\r\n                                <span data-bind="text: Artist.Name"></span>\r\n                            </div>\r\n                        </li>\r\n                    </ul>\r\n                </div>\r\n                <div class="pull-right" style="margin-top:20px;width:5%;">\r\n                    <i class="glyphicon glyphicon-chevron-right"></i>\r\n                </div>\r\n            </a>\r\n        </li>\r\n    </ul>\r\n    <hr />\r\n    <div class="muted" data-bind="ifnot: Albums().length">No albums were found</div>\r\n</div>\r\n<div class="tab-container" data-bind="visible: currentTab() == tabs.tracks, with: results().PagedTracks">\r\n    <ul class="list" data-bind="foreach: Tracks">\r\n        <!-- ko compose: \'partials/track.html\'--><!--/ko-->\r\n    </ul>\r\n    <hr />\r\n    <div class="muted" data-bind="ifnot: Tracks().length">No tracks were found</div>\r\n</div>\r\n'}),n("text!views.mobile/shell.html",[],function(){return'<div>\r\n    <header>\r\n        <nav class="navbar navbar-fixed-top navbar-inverse" role="navigation">\r\n            <div class="navbar-header">\r\n               <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#bs-example-navbar-collapse-1">\r\n                    <span class="sr-only">Toggle navigation</span>\r\n                    <span class="icon-bar"></span>\r\n                    <span class="icon-bar"></span>\r\n                    <span class="icon-bar"></span>\r\n               </button> \r\n                <!--ko compose: {model:\'viewmodels/search-bar\', activate: true}--><!--/ko-->\r\n                <img class="navbar-loading pull-right" alt="Loading" data-bind="visible: router.isNavigating" src="/Content/styles/Images/loading-nav.gif" />\r\n                \r\n            </div>\r\n            <div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1">\r\n                <ul class="nav navbar-nav" data-bind="foreach: authorizedRoutes">\r\n                    <li data-bind="css: { active: isActive }">\r\n                        <a data-bind="attr: { href: hash }, html: title"></a>\r\n                    </li>\r\n                </ul>    \r\n            </div>\r\n        </nav>\r\n    </header>\r\n    <section>\r\n        <div class="outer-container">\r\n            <div class="inner-container" data-bind="router: { cacheViews: true }">\r\n            </div>\r\n        </div>\r\n    </section>\r\n</div>'}),n("text!views/admin-log.html",[],function(){return'<div>\r\n    <table class="table table-striped table-hover vertical-spacing">\r\n        <thead>\r\n            <tr>\r\n                <th class="col-md-3"><a style="cursor:pointer;white-space: nowrap;" data-bind="click: toggleDirection">Timestamp&nbsp;<i class="glyphicon" data-bind="css: { \'glyphicon-chevron-down\': sortDirection() == \'Ascending\', \'glyphicon-chevron-up\': sortDirection() != \'Ascending\' }"></i></a></th>\r\n                <th class="col-md-2">Level</th>\r\n                <th class="col-md-7">Message</th>\r\n            </tr>\r\n        </thead>\r\n        <tbody data-bind="foreach: logEntries">\r\n            <tr>\r\n                <td  data-bind="shortDateTime: timeStamp"></td>\r\n                <td data-bind="text: level"></td>\r\n                <td data-bind="text: formattedMessage"></td>\r\n            </tr>\r\n        </tbody>\r\n    </table>\r\n    <button class="btn btn-default btn-block btn-lg btn-more" data-bind="click: getMoreLogEntries, visible: showMore">Load More</button>\r\n</div>  \r\n'}),n("text!views/admin-users.html",[],function(){return' <div>\r\n     <table class="table table-striped table-hover vertical-spacing">\r\n        <thead>\r\n            <tr>\r\n                <th>User name</th>\r\n                <th></th>\r\n            </tr>\r\n        </thead>\r\n         <tbody data-bind="foreach: adminUsers">\r\n             <tr>\r\n                 <td data-bind="text: Username"></td>\r\n                 <td><button  class="btn btn-danger admin-button pull-right" data-bind="click: $parent.removeAdminUser">Remove</button></td>\r\n             </tr>\r\n         </tbody>\r\n         <tfoot data-bind="with: newAdminUser">\r\n             <tr>\r\n                 <td><input placeholder="Enter user name" class="input-large" data-bind="value: Username, valueUpdate: \'keyup\'"  />  </td>\r\n                 <td><button class="btn btn-primary admin-button pull-right" data-bind="click: $parent.addAdminUser">Add New</button></td>\r\n             </tr>\r\n         </tfoot>\r\n    </table>     \r\n </div>'}),n("text!views/admin.html",[],function(){return'<div>\r\n    <ul class="nav nav-pills" data-bind="foreach: router.navigationModel">    \r\n        <li data-bind="css: { active: isActive }"><a data-bind="    attr: { href: hash }, html: title"></a></li>            \r\n    </ul>\r\n    <div data-bind="router: { cacheViews: true }">\r\n    </div>    \r\n</div>'}),n("text!views/album-browse.html",[],function(){return'<div data-bind="with: album">\r\n    <ul class="list">\r\n        <li class="list-column">\r\n            <img data-bind="attr: {src: ArtworkUrlMedium}" class="artwork artwork-medium"/>\r\n        </li>\r\n        <li class="list-column">\r\n            <ul class="list">\r\n                <li>\r\n                    <span data-bind="truncated: Name, truncatedLength: 80"></span>&nbsp;<span data-bind="visible: Year()!=0, text: \'(\' + Year() + \')\'"></span>\r\n                </li>\r\n                <li>\r\n                    by <a data-bind="attr: {href: \'#artists/\' + Artist.MusicProvider.Identifier() + \'/\' + Artist.Link()}, truncated: Artist.Name, truncatedLength: 80"></a>\r\n                </li>\r\n                <li>\r\n                    <a data-bind="attr: {href: \'http://open.spotify.com/album/\' + Link(), target: \'_Blank\'}">Play in spotify on your PC</a>\r\n                </li>\r\n            </ul>\r\n        </li>\r\n    </ul>\r\n    <ul class="list vertical-spacing" data-bind="foreach: Tracks">\r\n        <li class="list-row">\r\n            <ul class="list">\r\n                <li class="list-column">\r\n                    <span data-bind="text: $index() +1 + \' - \'"></span>\r\n                </li>\r\n                <li class="list-column">\r\n                    <ul class="list">\r\n                        <li><span data-bind="text: Name"/> <span data-bind="formattedDateTime: { source: DurationMilliseconds, format: \'({mm}:{ss})\'}" /></li>                        \r\n                        <li>\r\n                            <ul class="comma-separated" data-bind="foreach: Artists">\r\n                                <!--Only render artist if it\'s different to the album artist -->\r\n                                <!--ko if: Link() != $parents[1].Artist.Link() || $parent.Artists().length > 1-->\r\n                                <li><a data-bind="attr: {href: \'#artists/\' + MusicProvider.Identifier() + \'/\' + Link()}, text: Name"></a></li>  \r\n                                <!-- /ko -->\r\n                            </ul>\r\n                        </li>\r\n                    </ul>\r\n                </li>  \r\n                <li class="pull-right" data-bind="compose: { view: \'partials/queue-button\' }"></li>\r\n            </ul>\r\n        </li>\r\n    </ul>\r\n</div>\r\n';
}),n("text!views/artist-browse.html",[],function(){return'<div data-bind="with: artist">\r\n    <ul class="list">\r\n        <li class="list-column">\r\n            <img data-bind="attr: { src: PortraitUrlMedium }"  class="artwork artwork-medium"/>      \r\n        </li>\r\n        <li class="list-column" data-bind="truncated: Name, truncatedLength: 80"></li>\r\n    </ul>        \r\n    <ul class="nav nav-tabs nav-tabs-dialog vertical-spacing">\r\n        <li data-bind="css: { \'active\': $parent.currentTab() == $parent.tabs.albums }">\r\n            <a data-bind="click: $parent.showAlbums">Albums</a>\r\n        </li>\r\n        <li data-bind="css: { \'active\': $parent.currentTab() == $parent.tabs.similarArtists }">\r\n            <a data-bind="click: $parent.showSimilarArtists">Related artists</a>\r\n        </li>\r\n    </ul>        \r\n    <div class="tab-container" data-bind="visible: $parent.currentTab() == $parent.tabs.albums">\r\n        <ul class="list" data-bind="foreach: Albums">\r\n            <li class="list-row">\r\n                <ul class="list">\r\n                    <li class="list-column">\r\n                        <img alt="Artist portrait" data-bind="attr: { src: ArtworkUrlSmall }" class="artwork artwork-small"/>\r\n                    </li>\r\n                    <li class="list-column">\r\n                        <a data-bind="attr: { href: \'#albums/\' + MusicProvider.Identifier() + \'/\' + Link() }, truncated: Name, truncatedLength: 80"></a> <span data-bind="    visible: Year() != 0, text: \'(\' + Year() + \')\'"></span>\r\n                    </li>\r\n                </ul>\r\n            </li>\r\n        </ul>\r\n    </div>\r\n    <div class="tab-container" data-bind="visible: $parent.currentTab() == $parent.tabs.similarArtists">\r\n        <ul class="list" data-bind="foreach: Profile.SimilarArtists">\r\n            <li class="list-row">\r\n                <ul class="list">                \r\n                    <li class="list-column">\r\n                        <img alt="Artist portrait" data-bind="attr: { src: PortraitUrlSmall }" class="artwork artwork-small"/>\r\n                    </li>\r\n                    <li class="list-column">\r\n                        <a data-bind="attr: { href: \'#artists/\' + MusicProvider.Identifier() + \'/\' + Link() }, truncated: Name, truncatedLength: 80"></a>\r\n                    </li>\r\n                </ul>\r\n            </li>\r\n        </ul>\r\n    </div>\r\n</div>'}),n("text!views/artist.html",[],function(){return' <ul class="nav nav-tabs nav-tabs-dialog vertical-spacing" data-bind="foreach: router.navigationModel">\r\n    <li data-bind="css: { active: isActive }">\r\n        <a data-bind="attr: { href: hash }, html: title"></a>\r\n    </li>\r\n</ul>\r\n<div class="tab-container" data-bind="compose: router.activeItem"></div>'}),n("text!views/history.html",[],function(){return'<div>\r\n    <div class="btn-group">\r\n        <a class="btn btn-default" data-bind="attr: { href: \'#history\', disabled: filter() == \'all\' }">All</a>\r\n        <a class="btn btn-default" data-bind="attr: { href: \'#history/requested\', disabled: filter() == \'requested\' }">Requested</a>\r\n        <a class="btn btn-default" data-bind="attr: { href: \'#history/mine\', disabled: filter() == \'mine\' }">Mine</a>\r\n    </div>\r\n    <ul class="list vertical-spacing" data-bind="foreach: history">\r\n        <!--ko compose: {view: \'partials/queued-track\', cacheViews: true}-->\r\n        <!--/ko-->\r\n    </ul>    \r\n    <button class="btn btn-default btn-block btn-lg btn-more" data-bind="click: getMoreHistory, visible: showMore">Load More</button>\r\n</div>\r\n'}),n("text!views/likes.html",[],function(){return'<div>\r\n    <span data-bind="visible: likes().length == 0">You haven\'t liked anything yet</span>\r\n    <ul class="list" data-bind="foreach: likes">\r\n        <!-- ko compose: \'partials/track.html\'--><!--/ko-->\r\n    </ul>\r\n    \r\n    <button class="btn btn-default btn-block btn-lg btn-more" data-bind="click: getMoreLikes, visible: showMore">Load More</button>\r\n</div>'}),n("text!views/now-playing.html",[],function(){return'<div data-bind="with: nowPlaying" >\r\n            \r\n    <ul class="list " >\r\n        <li class="list-column">\r\n            <div data-bind="if: Track.TrackArtworkUrl">\r\n                <img data-bind="attr: { src: Track.TrackArtworkUrl }" class="artwork artwork-large"/>   \r\n            </div>\r\n            <div data-bind="ifnot: Track.TrackArtworkUrl">\r\n                <img data-bind="attr: { src: Track.Album.ArtworkUrlLarge }" class="artwork artwork-large"/>   \r\n            </div>                   \r\n        </li>\r\n        <li class="list-column now-playing-text">\r\n            <h3>Now playing BWAP BWAP YOU GUYS</h3>\r\n            <ul class="list">                \r\n                <li><span data-bind="truncated: Track.Name"></span></li>\r\n                <li data-bind="if: Track.Artists">\r\n                    <ul class="comma-separated" data-bind="foreach: Track.Artists">                                                                \r\n                        <li><a data-bind="attr: { href: \'#artists/\' + MusicProvider.Identifier() + \'/\' + Link() }, text: Name"></a></li>                                \r\n                    </ul>\r\n                </li>\r\n                <li data-bind="if: Track.Album"><a data-bind="    attr: { href: \'#albums/\' + Track.Album.MusicProvider.Identifier() + \'/\' + Track.Album.Link() }, truncated: Track.Album.Name"></a></li>\r\n                <li class="text-small vertical-spacing">Queued by <span data-bind="text: User"></span>&nbsp;<marquee style="font-style:italic" data-bind="text: Reason"></marquee></li>\r\n                <li class="text-small">\r\n                    <a data-bind="attr: { href: Track.ExternalLink(), target: \'_Blank\' }, text: \'Play in \' + Track.MusicProvider.Name()"></a>\r\n                </li>\r\n            </ul>\r\n        </li>\r\n    </ul>\r\n    <div class="vertical-spacing">\r\n        <span data-bind="formattedDateTime: { source: $parent.positionAsMilliseconds, format: \'{mm}:{ss}\' }" style="color:#0e90d2;padding:0 5px 0 3px;"></span>\r\n        <span data-bind="formattedDateTime: { source: Track.DurationMilliseconds, format: \'{mm}:{ss}\' }" style="color:#0e90d2;padding:0 3px 0 5px;" class="pull-right"></span>\r\n    </div>\r\n    <div class="progress now-playing-progress">\r\n        <div class="progress-bar" data-bind="style: { width: $parent.positionAsPercent() + \'%\' }"></div>\r\n    </div> \r\n\r\n    <ul class="list vertical-spacing">\r\n        <li>\r\n            <div class="btn-toolbar">\r\n                <ul class="list">\r\n                    <!-- ko if: $root.isAdmin -->\r\n                    <li class="list-column">\r\n                        <div class="btn-group">\r\n                            <button class="btn btn-default" data-bind="click: $parent.pausePlayTrack"><i class="glyphicon" data-bind="css: { \'glyphicon-pause\': !IsPaused(), \'glyphicon-play\': IsPaused }" ></i></button>\r\n                            <!-- ko if: $root.isSuperAdmin -->\r\n                            <button class="btn btn-default" data-bind="click: $parent.nextTrack"><i class="glyphicon glyphicon-step-forward"></i></button>\r\n                            <button class="btn btn-default" data-bind="click: $parent.forgetTrack">Forget</button>\r\n                            <!--/ko -->\r\n                        </div>\r\n                    </li>\r\n                    <li class="list-column">\r\n                        <div class="btn-group">\r\n                            <button class="btn btn-default" data-bind="css: { \'disabled\': $parent.currentVolume() == 0 }, click: $parent.decreaseVolume"><i class="glyphicon glyphicon-volume-down"></i></button>\r\n                            <button class="btn btn-default disabled"><span data-bind="text: $parent.currentVolume"></span><span>%</span></button>\r\n                            <button class="btn btn-default" data-bind="css: { \'disabled\': $parent.currentVolume() == 100 }, click: $parent.increaseVolume"><i class="glyphicon glyphicon-volume-up"></i></button>\r\n                        </div>\r\n                    </li>\r\n                    <!-- /ko -->\r\n                    <li class="list-column">\r\n                        <button class="btn btn-default" data-bind="click: $parent.likeTrack, popover: { template: \'likesPopover\', visible: Likes().length, title: \'Liked by\' }"><i class="glyphicon glyphicon-thumbs-up"></i>&nbsp; Like &nbsp;<span class="badge badge-like" data-bind="text: LikeCount"></span></button>\r\n                    </li>\r\n                    <li class="list-column">\r\n                        <button class="btn btn-default" data-bind="click: $parent.vetoTrack, popover: { template: \'vetoesPopover\', visible: Vetoes().length, title: \'Vetoed by\' }"><i class="glyphicon glyphicon-thumbs-down"></i>&nbsp; Veto &nbsp;<span class="badge badge-veto" data-bind="text: VetoCount"></span></button>\r\n                    </li>\r\n                </ul>\r\n            </div>\r\n        </li>\r\n    </ul>\r\n</div>\r\n<ul class="nav nav-tabs nav-tabs-dialog vertical-spacing">\r\n    <li data-bind="css: { \'active\': currentTab() == tabs.playingSoon }">\r\n        <a data-bind="click: showPlayingSoon">Playing Soon</a>\r\n    </li>\r\n    <li data-bind="css: { \'active\': currentTab() == tabs.recentlyPlayed }">\r\n        <a data-bind="click: showRecentlyPlayed">Recently Played</a>\r\n    </li>\r\n</ul>\r\n<div class="tab-container" data-bind="visible: currentTab() == tabs.playingSoon">\r\n    <div data-bind="if: playingSoon().length">\r\n        <ul class="list" data-bind="foreach: playingSoon">\r\n            <!--ko compose: \'partials/queued-track.html\'--><!--/ko-->    \r\n        </ul>                                  \r\n        <div data-bind="if: playingSoon().length" style="padding-top:10px;">\r\n            <a href="#queue">See all queued tracks</a>\r\n        </div>\r\n    </div>\r\n    <div data-bind="ifnot: playingSoon().length">There are no tracks in the queue</div>\r\n</div>\r\n<div class="tab-container" data-bind="visible: currentTab() == tabs.recentlyPlayed">\r\n    <ul class="list" data-bind="foreach: recentlyPlayed">\r\n        <!--ko compose: \'partials/queued-track.html\'--><!--/ko-->\r\n    </ul> \r\n    <div style="padding-top:10px;">\r\n        <a href="#history">See all history</a>\r\n    </div>\r\n</div>\r\n\r\n<script type="html/text" id="likesPopover">\r\n  <ul class="list" data-bind="foreach: Likes">\r\n    <li data-bind="text: ByUser"></li>\r\n  </ul>\r\n</script>\r\n\r\n<script type="html/text" id="vetoesPopover">\r\n  <ul class="list" data-bind="foreach: Vetoes">\r\n    <li data-bind="text: ByUser"></li>\r\n  </ul>\r\n</script>'}),n("text!views/partials/queue-button.html",[],function(){return'<div class="input-group btn-queue" style="width:200px;">\r\n    <div class="btn-queue-input" data-bind="css: { reasonExpanded: ReasonExpanded, disabled: IsAlreadyQueued }">\r\n        <div class="reason" data-bind="click: $root.expandReason">\r\n            <i class="reason-icon" style="margin-top: 3px;"/>\r\n        </div>\r\n        <input type="text" class="dropleft-toggle form-control" placeholder="Why are you queuing this?" data-bind="value: Reason, valueUpdate: \'keyup\', enterkey: $root.queueTrack">\r\n    </div>\r\n    <div class="input-group-btn">\r\n        <button style="width:80px" class="btn btn-default" data-bind="click: $root.queueTrack, css: { disabled: IsAlreadyQueued, \'btn-success\': IsAlreadyQueued, \'btn-default\': !IsAlreadyQueued() }, text: IsAlreadyQueued() == true ? \'Queued\' : \'Queue\'">Queue</button>\r\n    </div>\r\n</div>\r\n\r\n'}),n("text!views/partials/queued-actions.html",[],function(){return'<div>\r\n    <div data-bind="visible: $data.queueActionsShown">\r\n        <div class="btn-group">\r\n    \r\n            <!-- ko if: $root.isSuperAdmin -->\r\n            <button class="btn btn-default" data-bind="click: $root.nextTrack, css: { disabled: $data.IsSkipped }"><i class="glyphicon glyphicon-remove"></i></button>\r\n            <button class="btn btn-default" data-bind="click: $root.forgetTrack, css: { disabled: $data.IsSkipped && $data.Excluded }">Forget</button>\r\n            <!-- /ko -->\r\n\r\n            <button class="btn btn-default" data-bind="visible: $data.IsSkipped()">\r\n                <span class="badge badge-veto"><i class="glyphicon glyphicon-thumbs-down"></i></span>\r\n            </button>\r\n\r\n            <button class="btn btn-default" data-bind="visible: !$data.IsSkipped(), click: $root.likeTrack">\r\n                <i class="glyphicon glyphicon-thumbs-up"></i>\r\n                <span class="badge badge-like" data-bind="text: LikeCount"></span>   \r\n            </button>\r\n            <button class="btn btn-default" data-bind="visible: !$data.IsSkipped(), click: $root.vetoTrack">\r\n                <i class="glyphicon glyphicon-thumbs-down"></i>\r\n                <span class="badge badge-veto" data-bind="text: VetoCount"></span>   \r\n            </button>\r\n        </div>\r\n    </div>\r\n    <div data-bind="visible: $data.queueActionsShown != null && !$data.queueActionsShown() && ($data.VetoCount() || $data.LikeCount() || $data.IsSkipped)" style="padding-right: 13px;padding-top:6px;">\r\n        <div data-bind="visible: $data.IsSkipped()">\r\n            <span class="badge badge-veto"><i class="glyphicon glyphicon-thumbs-down"></i></span>\r\n        </div>\r\n\r\n        <div data-bind="visible: !$data.IsSkipped()" style="float:left;padding-right:25px;">\r\n            <i class="glyphicon glyphicon-thumbs-up" style="margin-top:2px;"></i>\r\n            <span class="badge badge-like" data-bind="text: LikeCount" style="position:relative;top:-1px;"></span>   \r\n        </div>\r\n        <div data-bind="visible: !$data.IsSkipped()" style="float:right;">\r\n            <i class="glyphicon glyphicon-thumbs-down" style="margin-top:2px;"></i>\r\n            <span class="badge badge-veto" data-bind="text: VetoCount" style="position:relative;top:-1px;"></span>   \r\n        </div>\r\n    </div>\r\n</div>\r\n'}),n("text!views/partials/queued-track.html",[],function(){return'<li class="list-row" data-bind="if: $data, event: { mouseover: $root.showQueueActions, mouseleave: $root.hideQueueActions }"> <!--Only render if it\'s not the playing track.-->\r\n    <ul class="list">\r\n        <li class="list-column">         \r\n            <div data-bind="if: Track.TrackArtworkUrl">\r\n                <img data-bind="attr: { src: Track.TrackArtworkUrl }" class="artwork artwork-small img-queued" />\r\n            </div>\r\n            <div data-bind="ifnot: Track.TrackArtworkUrl">\r\n                <img data-bind="attr: { src: Track.Album.ArtworkUrlSmall }" class="artwork artwork-small img-queued" />\r\n            </div>\r\n        </li>\r\n        <li class="list-column track-info">\r\n            <ul class="list">\r\n                <li>\r\n                    <span data-bind="truncated: Track.Name, truncatedLength: 60"></span> <span data-bind="formattedDateTime: { source: Track.DurationMilliseconds, format: \'({mm}:{ss})\' }"></span>                    \r\n                    <!--<span class="label" data-bind="visible: $root.nowPlayingViewModel.nowPlaying() && Id() == $root.nowPlayingViewModel.nowPlaying().Id()"><a href="#now-playing" >Playing right now</a></span>                    -->\r\n                </li>\r\n                <li>\r\n                    <ul class="comma-separated" data-bind="foreach: Track.Artists">\r\n                        <!-- ko compose: {view: \'partials/track-artist\'}--><!--/ko-->\r\n                    </ul>\r\n                </li>\r\n                <!-- ko if: $data.Track.Album -->\r\n                <li>\r\n                    <a data-bind="attr: { href: \'#albums/\' + Track.Album.MusicProvider.Identifier() + \'/\' + Track.Album.Link() }, truncated: Track.Album.Name, truncatedLength: 85"></a>\r\n                </li>\r\n                <!-- /ko -->\r\n                <li class="small-text">                \r\n                    Queued by <span data-bind="text: User"></span><span style="font-style:italic" data-bind="visible: Reason(), text: \' \' + Reason()"></span><span data-bind="visible: $data.StartedPlayingDateTime">, </span>\r\n                    <span data-bind="if: $data.StartedPlayingDateTime"> played at <span data-bind="    timeAndDate: StartedPlayingDateTime"></span></span>\r\n                </li>\r\n                </li>\r\n                <li class="small-text" data-bind="if: $data.StartedPlayingDateTime">\r\n                    Likes/Vetoes: <span class="badge badge-like" data-bind="text: $data.LikeCount, popover: { template: \'likesPopover\', visible: Likes().length, title: \'Liked by\' }"></span> \r\n                    / <span data-bind="text: $data.VetoCount, popover: { template: \'vetoesPopover\', visible: Vetoes().length, title: \'Vetoed by\' }" class="badge badge-veto"></span>\r\n                </li>\r\n            </ul>\r\n        </li>\r\n        <!--\r\n            Interesting tip - If it\'s possible that the property you want to bind to doesn\'t exist, prefix it with $data (not sure why but this works)\r\n            Also, need to set the data context to Track using the containerless syntax\r\n            -->\r\n            \r\n        <li class="pull-right">\r\n            <div data-bind="if: $data.StartedPlayingDateTime">\r\n                <!-- ko compose: {model: $data.Track, view:\'views/partials/queue-button\', preserveContext:true}--><!--/ko-->\r\n            </div>\r\n            \r\n            <div data-bind="ifnot: $data.StartedPlayingDateTime">                \r\n                <!-- ko compose: {view:\'partials/queued-actions\'}--><!--/ko-->\r\n            </div>\r\n        </li>\r\n    </ul>\r\n</li> \r\n\r\n'}),n("text!views/partials/track-artist.html",[],function(){return"    <li><a data-bind=\"attr: {href: '#artists/' + MusicProvider.Identifier() + '/' + Link()}, text: Name\"></a></li>                                "}),n("text!views/partials/track.html",[],function(){return'<li class="list-row">\r\n    <ul class="list">\r\n        <li class="list-column">\r\n            <img data-bind="attr: { src: TrackArtworkUrl() || Album.ArtworkUrlSmall() }" class="artwork artwork-small" />          \r\n        </li>\r\n        <li class="list-column track-info">\r\n            <ul class="list">\r\n                <li>\r\n                    <span data-bind="truncated: Name, truncatedLength: 70"></span>&nbsp;<span data-bind="    formattedDateTime: { source: DurationMilliseconds, format: \'({mm}:{ss})\' }"></span>\r\n                </li>\r\n                <li>\r\n                    <ul class="comma-separated" data-bind="foreach: Artists">\r\n                        <li><a data-bind="attr: { href: \'#artists/\' + MusicProvider.Identifier() + \'/\' + Link() }, text: Name"></a></li>          \r\n                    </ul>\r\n                </li>\r\n                <!-- ko if: $data.Album -->\r\n                <li>                            \r\n                    <a data-bind="attr: { href: \'#albums/\' + Album.MusicProvider.Identifier() + \'/\' + Album.Link() }, truncated: Album.Name, truncatedLength: 75"></a>\r\n                </li>\r\n                <!-- /ko -->\r\n            </ul>\r\n        </li>\r\n        <li class="pull-right" data-bind="compose: \'partials/queue-button.html\'"></li>\r\n    </ul>\r\n</li>\r\n'}),n("text!views/queue.html",[],function(){return'<div>\r\n    <span data-bind="if: queue().length == 0">There are no tracks in the queue</span>\r\n    <ul class="list vertical-spacing" data-bind="foreach: queue">\r\n        <!--ko compose: \'partials/queued-track.html\'--><!--/ko-->\r\n    </ul>\r\n</div>\r\n'}),n("text!views/search-bar.html",[],function(){return'<form class="navbar-form" role="search" data-bind="submit: doSearch">\r\n    <div class="input-append form-group">\r\n        <input name="searchTerm" type="text" size="14" class="form-control" data-bind="value: searchTerm,  valueUpdate: \'afterkeydown\'" placeholder="Search by artist, album or track" />\r\n        <div class="btn-group" style="margin-top: 0;" data-bind="visible: providersVisible">\r\n            <span class="btn dropdown-toggle" data-toggle="dropdown">\r\n                <img data-bind="attr:{ src: selectedProviderIcon }" />\r\n                <span class="caret"></span>\r\n            </span>\r\n            <ul class="dropdown-menu providers pull-right" data-bind="foreach: providers">\r\n                <li><a data-bind="click: $parent.selectProvider"><img data-bind="attr: { src: \'Content/styles/Images/\' + Name() + \'logo.png\' }" /><span data-bind="text: Name"></span></a></li>\r\n            </ul>\r\n        </div>\r\n        <button class="btn btn-default" type="submit">\r\n            <i class="glyphicon glyphicon-search"></i>\r\n        </button>\r\n    </div>\r\n</form> '}),n("text!views/search-results.html",[],function(){return'<div>Search results for <strong data-bind="text: searchedFor"></strong></div>\r\n<div data-bind="if: results">\r\n    <ul class="nav nav-tabs nav-tabs-dialog vertical-spacing">\r\n        <li data-bind="css: {\'active\': currentTab()==tabs.artists}">\r\n            <a data-bind="click: showArtists">Artists</a>\r\n        </li>\r\n        <li data-bind="css: {\'active\': currentTab()==tabs.albums}">\r\n            <a data-bind="click: showAlbums">Albums</a>\r\n        </li>\r\n        <li data-bind="css: {\'active\': currentTab()==tabs.tracks}">\r\n            <a data-bind="click: showTracks">Tracks</a>\r\n        </li>\r\n    </ul>\r\n    <div class="tab-container" data-bind="visible: currentTab()==tabs.artists, with: results().PagedArtists">\r\n        <ul class="list" data-bind="foreach: Artists">\r\n            <li class="list-row">\r\n                <ul class="list">\r\n                    <li class="list-column">\r\n                        <img data-bind="attr: {src: PortraitUrlSmall}" class="artwork artwork-small"/>\r\n                    </li>\r\n                    <li class="list-column">\r\n                        <a data-bind="attr: {href: \'#artists/\' + MusicProvider.Identifier() + \'/\' + Link()}, truncated: Name, truncatedLength:75"></a>\r\n                    </li>\r\n                </ul>\r\n            </li>\r\n        </ul>\r\n        <div data-bind="ifnot: Artists().length">No artists were found</div>\r\n    </div>\r\n    <div class="tab-container" data-bind="visible: currentTab()==tabs.albums, with: results().PagedAlbums">\r\n        <ul class="list" data-bind="foreach: Albums">\r\n            <li class="list-row">\r\n                <ul class="list">\r\n                    <li class="list-column">\r\n                        <img data-bind="attr: {src: ArtworkUrlSmall}" class="artwork artwork-small" />\r\n                    </li>\r\n                    <li class="list-column">\r\n                        <ul class="list">\r\n                            <li><a data-bind="attr: {href: \'#albums/\' + MusicProvider.Identifier() + \'/\' + Link()}, truncated: Name, truncatedLength: 70"></a>&nbsp;<span data-bind="visible: Year()!=0, text: \'(\' + Year() + \')\'"></span></li>\r\n                            <li><a data-bind="attr: {href: \'#artists/\' + Artist.MusicProvider.Identifier() + \'/\' + Artist.Link()}, truncated: Artist.Name, truncatedLength:75"></a></li>\r\n                        </ul>\r\n                    </li>\r\n                </ul>\r\n            </li>\r\n        </ul>\r\n        <div data-bind="ifnot: Albums().length">No albums were found</div>\r\n    </div>\r\n    <div class="tab-container" data-bind="visible: currentTab()==tabs.tracks, with: results().PagedTracks">       \r\n        <ul class="list" data-bind="foreach: Tracks">\r\n            <!-- ko compose: \'partials/track.html\'--><!--/ko-->\r\n        </ul>\r\n        <div data-bind="ifnot: Tracks().length">No tracks were found</div>\r\n    </div>\r\n</div>'}),n("text!views/shell.html",[],function(){return'<div>\r\n    <header>\r\n        <nav class="navbar navbar-fixed-top navbar-inverse" role="navigation">\r\n            <div class="navbar-header">\r\n                <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#bs-example-navbar-collapse-1">\r\n                    <span class="sr-only">Toggle navigation</span>\r\n                    <span class="icon-bar"></span>\r\n                    <span class="icon-bar"></span>\r\n                    <span class="icon-bar"></span>\r\n                </button>\r\n            </div>\r\n            <div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1">\r\n            <ul class="nav navbar-nav" data-bind="foreach: authorizedRoutes">\r\n                    <li data-bind="css: { active: isActive }">\r\n                        <a data-bind="attr: { href: hash }, html: title"></a>\r\n                    </li>\r\n                </ul>    \r\n                <!--ko compose: {model:\'viewmodels/search-bar\', activate: true}--><!--/ko-->\r\n                <img class="navbar-loading pull-right" alt="Loading" data-bind="visible: router.isNavigating" src="/Content/styles/Images/loading-nav.gif" />\r\n            </div>\r\n        </nav>\r\n    </header>\r\n    <section>\r\n        <div class="outer-container">\r\n            <div class="inner-container" data-bind="router: { cacheViews: true }">\r\n            </div>\r\n        </div>\r\n    </section>\r\n</div>'}),e(["main.mobile"])}();
//# sourceMappingURL=main.mobile.build.js.map//# sourceMappingURL=main.mobile-built.js.map